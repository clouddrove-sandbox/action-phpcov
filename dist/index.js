module.exports=function(e,t){"use strict";var n={};function __webpack_require__(t){if(n[t]){return n[t].exports}var r=n[t]={i:t,l:false,exports:{}};e[t].call(r.exports,r,r.exports,__webpack_require__);r.l=true;return r.exports}__webpack_require__.ab=__dirname+"/";function startup(){return __webpack_require__(665)}t(__webpack_require__);return startup()}({18:function(){eval("require")("encoding")},43:function(e,t,n){"use strict";e.exports={copySync:n(110)}},50:function(e,t,n){var r=n(747);var i=n(622);var o=n(571);function patternMatcher(e){return function(t,n){var r=new o.Minimatch(e,{matchBase:true});return(!r.negate||n.isFile())&&r.match(t)}}function toMatcherFunction(e){if(typeof e=="function"){return e}else{return patternMatcher(e)}}function readdir(e,t,n){if(typeof t=="function"){n=t;t=[]}if(!n){return new Promise(function(n,r){readdir(e,t||[],function(e,t){if(e){r(e)}else{n(t)}})})}t=t.map(toMatcherFunction);var o=[];r.readdir(e,function(s,c){if(s){return n(s)}var a=c.length;if(!a){return n(null,o)}c.forEach(function(s){var c=i.join(e,s);r.stat(c,function(e,r){if(e){return n(e)}if(t.some(function(e){return e(c,r)})){a-=1;if(!a){return n(null,o)}return null}if(r.isDirectory()){readdir(c,t,function(e,t){if(e){return n(e)}o=o.concat(t);a-=1;if(!a){return n(null,o)}})}else{o.push(c);a-=1;if(!a){return n(null,o)}}})})})}e.exports=readdir},59:function(e){e.exports={_from:"now-client",_id:"now-client@6.0.1",_inBundle:false,_integrity:"sha512-ynQ3YGylvEXZEE/f5k01INH9u+R1Xxsfcv1J1j1wcjEKzD1v6gqaVnCEwZNm67umRoLNHbWr9sOfUOEQlDVfng==",_location:"/now-client",_phantomChildren:{},_requested:{type:"tag",registry:true,raw:"now-client",name:"now-client",escapedName:"now-client",rawSpec:"",saveSpec:null,fetchSpec:"latest"},_requiredBy:["#USER","/"],_resolved:"https://registry.npmjs.org/now-client/-/now-client-6.0.1.tgz",_shasum:"f876e03108f3f1088cce61ca02d1596954063901",_spec:"now-client",_where:"/home/theodore/Development/theomessin/action-phpcov",bugs:{url:"https://github.com/zeit/now/issues"},bundleDependencies:false,dependencies:{"@zeit/fetch":"5.1.0","async-retry":"1.2.3","async-sema":"3.0.0","fs-extra":"8.0.1",ignore:"4.0.6",ms:"2.1.2","node-fetch":"2.6.0",querystring:"^0.2.0","recursive-readdir":"2.2.2","sleep-promise":"8.0.1"},deprecated:false,description:"[![Build Status](https://travis-ci.org/zeit/now-client.svg?branch=master)](https://travis-ci.org/zeit/now-client) [![Join the community on Spectrum](https://withspectrum.github.io/badge/badge.svg)](https://spectrum.chat/zeit)",devDependencies:{"@types/async-retry":"1.4.1","@types/fs-extra":"7.0.0","@types/jest":"24.0.16","@types/ms":"0.7.30","@types/node":"12.0.4","@types/node-fetch":"2.3.4","@types/recursive-readdir":"2.2.0","@zeit/ncc":"0.18.5",typescript:"3.5.1"},files:["dist"],gitHead:"d6f71c8d7bad6ad8efeb70e5afc07a2af796a766",homepage:"https://zeit.co",jest:{preset:"ts-jest",testEnvironment:"node",verbose:false,setupFilesAfterEnv:["<rootDir>/tests/setup/index.ts"]},license:"MIT",main:"dist/index.js",name:"now-client",repository:{type:"git",url:"git+https://github.com/zeit/now.git",directory:"packages/now-client"},scripts:{build:"tsc","test-integration-once":"jest --verbose --forceExit","test-lint":"eslint . --ext .js,.ts --ignore-path ../../.eslintignore"},typings:"dist/index.d.ts",version:"6.0.1"}},87:function(e){e.exports=require("os")},93:function(e,t,n){var r=n(413).Stream;e.exports=legacy;function legacy(e){return{ReadStream:ReadStream,WriteStream:WriteStream};function ReadStream(t,n){if(!(this instanceof ReadStream))return new ReadStream(t,n);r.call(this);var i=this;this.path=t;this.fd=null;this.readable=true;this.paused=false;this.flags="r";this.mode=438;this.bufferSize=64*1024;n=n||{};var o=Object.keys(n);for(var s=0,c=o.length;s<c;s++){var a=o[s];this[a]=n[a]}if(this.encoding)this.setEncoding(this.encoding);if(this.start!==undefined){if("number"!==typeof this.start){throw TypeError("start must be a Number")}if(this.end===undefined){this.end=Infinity}else if("number"!==typeof this.end){throw TypeError("end must be a Number")}if(this.start>this.end){throw new Error("start must be <= end")}this.pos=this.start}if(this.fd!==null){process.nextTick(function(){i._read()});return}e.open(this.path,this.flags,this.mode,function(e,t){if(e){i.emit("error",e);i.readable=false;return}i.fd=t;i.emit("open",t);i._read()})}function WriteStream(t,n){if(!(this instanceof WriteStream))return new WriteStream(t,n);r.call(this);this.path=t;this.fd=null;this.writable=true;this.flags="w";this.encoding="binary";this.mode=438;this.bytesWritten=0;n=n||{};var i=Object.keys(n);for(var o=0,s=i.length;o<s;o++){var c=i[o];this[c]=n[c]}if(this.start!==undefined){if("number"!==typeof this.start){throw TypeError("start must be a Number")}if(this.start<0){throw new Error("start must be >= zero")}this.pos=this.start}this.busy=false;this._queue=[];if(this.fd===null){this._open=e.open;this._queue.push([this._open,this.path,this.flags,this.mode,undefined]);this.flush()}}}},95:function(e,t,n){"use strict";const r=n(747);const i=n(622);const o=n(43).copySync;const s=n(723).removeSync;const c=n(727).mkdirpSync;const a=n(127);function moveSync(e,t,n){n=n||{};const r=n.overwrite||n.clobber||false;const{srcStat:o}=a.checkPathsSync(e,t,"move");a.checkParentPathsSync(e,o,t,"move");c(i.dirname(t));return doRename(e,t,r)}function doRename(e,t,n){if(n){s(t);return rename(e,t,n)}if(r.existsSync(t))throw new Error("dest already exists.");return rename(e,t,n)}function rename(e,t,n){try{r.renameSync(e,t)}catch(r){if(r.code!=="EXDEV")throw r;return moveAcrossDevice(e,t,n)}}function moveAcrossDevice(e,t,n){const r={overwrite:n,errorOnExist:true};o(e,t,r);return s(e)}e.exports=moveSync},106:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:true});const r=n(59);t.pkgVersion=r.version},110:function(e,t,n){"use strict";const r=n(747);const i=n(622);const o=n(727).mkdirsSync;const s=n(916).utimesMillisSync;const c=n(127);function copySync(e,t,n){if(typeof n==="function"){n={filter:n}}n=n||{};n.clobber="clobber"in n?!!n.clobber:true;n.overwrite="overwrite"in n?!!n.overwrite:n.clobber;if(n.preserveTimestamps&&process.arch==="ia32"){console.warn(`fs-extra: Using the preserveTimestamps option in 32-bit node is not recommended;\n\n    see https://github.com/jprichardson/node-fs-extra/issues/269`)}const{srcStat:r,destStat:i}=c.checkPathsSync(e,t,"copy");c.checkParentPathsSync(e,r,t,"copy");return handleFilterAndCopy(i,e,t,n)}function handleFilterAndCopy(e,t,n,s){if(s.filter&&!s.filter(t,n))return;const c=i.dirname(n);if(!r.existsSync(c))o(c);return startCopy(e,t,n,s)}function startCopy(e,t,n,r){if(r.filter&&!r.filter(t,n))return;return getStats(e,t,n,r)}function getStats(e,t,n,i){const o=i.dereference?r.statSync:r.lstatSync;const s=o(t);if(s.isDirectory())return onDir(s,e,t,n,i);else if(s.isFile()||s.isCharacterDevice()||s.isBlockDevice())return onFile(s,e,t,n,i);else if(s.isSymbolicLink())return onLink(e,t,n,i)}function onFile(e,t,n,r,i){if(!t)return copyFile(e,n,r,i);return mayCopyFile(e,n,r,i)}function mayCopyFile(e,t,n,i){if(i.overwrite){r.unlinkSync(n);return copyFile(e,t,n,i)}else if(i.errorOnExist){throw new Error(`'${n}' already exists`)}}function copyFile(e,t,n,i){if(typeof r.copyFileSync==="function"){r.copyFileSync(t,n);r.chmodSync(n,e.mode);if(i.preserveTimestamps){return s(n,e.atime,e.mtime)}return}return copyFileFallback(e,t,n,i)}function copyFileFallback(e,t,i,o){const s=64*1024;const c=n(577)(s);const a=r.openSync(t,"r");const u=r.openSync(i,"w",e.mode);let f=0;while(f<e.size){const e=r.readSync(a,c,0,s,f);r.writeSync(u,c,0,e);f+=e}if(o.preserveTimestamps)r.futimesSync(u,e.atime,e.mtime);r.closeSync(a);r.closeSync(u)}function onDir(e,t,n,r,i){if(!t)return mkDirAndCopy(e,n,r,i);if(t&&!t.isDirectory()){throw new Error(`Cannot overwrite non-directory '${r}' with directory '${n}'.`)}return copyDir(n,r,i)}function mkDirAndCopy(e,t,n,i){r.mkdirSync(n);copyDir(t,n,i);return r.chmodSync(n,e.mode)}function copyDir(e,t,n){r.readdirSync(e).forEach(r=>copyDirItem(r,e,t,n))}function copyDirItem(e,t,n,r){const o=i.join(t,e);const s=i.join(n,e);const{destStat:a}=c.checkPathsSync(o,s,"copy");return startCopy(a,o,s,r)}function onLink(e,t,n,o){let s=r.readlinkSync(t);if(o.dereference){s=i.resolve(process.cwd(),s)}if(!e){return r.symlinkSync(s,n)}else{let e;try{e=r.readlinkSync(n)}catch(e){if(e.code==="EINVAL"||e.code==="UNKNOWN")return r.symlinkSync(s,n);throw e}if(o.dereference){e=i.resolve(process.cwd(),e)}if(c.isSrcSubdir(s,e)){throw new Error(`Cannot copy '${s}' to a subdirectory of itself, '${e}'.`)}if(r.statSync(n).isDirectory()&&c.isSrcSubdir(e,s)){throw new Error(`Cannot overwrite '${e}' with '${s}'.`)}return copyLink(s,n)}}function copyLink(e,t){r.unlinkSync(t);return r.symlinkSync(e,t)}e.exports=copySync},127:function(e,t,n){"use strict";const r=n(747);const i=n(622);const o=10;const s=5;const c=0;const a=process.versions.node.split(".");const u=Number.parseInt(a[0],10);const f=Number.parseInt(a[1],10);const l=Number.parseInt(a[2],10);function nodeSupportsBigInt(){if(u>o){return true}else if(u===o){if(f>s){return true}else if(f===s){if(l>=c){return true}}}return false}function getStats(e,t,n){if(nodeSupportsBigInt()){r.stat(e,{bigint:true},(e,i)=>{if(e)return n(e);r.stat(t,{bigint:true},(e,t)=>{if(e){if(e.code==="ENOENT")return n(null,{srcStat:i,destStat:null});return n(e)}return n(null,{srcStat:i,destStat:t})})})}else{r.stat(e,(e,i)=>{if(e)return n(e);r.stat(t,(e,t)=>{if(e){if(e.code==="ENOENT")return n(null,{srcStat:i,destStat:null});return n(e)}return n(null,{srcStat:i,destStat:t})})})}}function getStatsSync(e,t){let n,i;if(nodeSupportsBigInt()){n=r.statSync(e,{bigint:true})}else{n=r.statSync(e)}try{if(nodeSupportsBigInt()){i=r.statSync(t,{bigint:true})}else{i=r.statSync(t)}}catch(e){if(e.code==="ENOENT")return{srcStat:n,destStat:null};throw e}return{srcStat:n,destStat:i}}function checkPaths(e,t,n,r){getStats(e,t,(i,o)=>{if(i)return r(i);const{srcStat:s,destStat:c}=o;if(c&&c.ino&&c.dev&&c.ino===s.ino&&c.dev===s.dev){return r(new Error("Source and destination must not be the same."))}if(s.isDirectory()&&isSrcSubdir(e,t)){return r(new Error(errMsg(e,t,n)))}return r(null,{srcStat:s,destStat:c})})}function checkPathsSync(e,t,n){const{srcStat:r,destStat:i}=getStatsSync(e,t);if(i&&i.ino&&i.dev&&i.ino===r.ino&&i.dev===r.dev){throw new Error("Source and destination must not be the same.")}if(r.isDirectory()&&isSrcSubdir(e,t)){throw new Error(errMsg(e,t,n))}return{srcStat:r,destStat:i}}function checkParentPaths(e,t,n,o,s){const c=i.resolve(i.dirname(e));const a=i.resolve(i.dirname(n));if(a===c||a===i.parse(a).root)return s();if(nodeSupportsBigInt()){r.stat(a,{bigint:true},(r,i)=>{if(r){if(r.code==="ENOENT")return s();return s(r)}if(i.ino&&i.dev&&i.ino===t.ino&&i.dev===t.dev){return s(new Error(errMsg(e,n,o)))}return checkParentPaths(e,t,a,o,s)})}else{r.stat(a,(r,i)=>{if(r){if(r.code==="ENOENT")return s();return s(r)}if(i.ino&&i.dev&&i.ino===t.ino&&i.dev===t.dev){return s(new Error(errMsg(e,n,o)))}return checkParentPaths(e,t,a,o,s)})}}function checkParentPathsSync(e,t,n,o){const s=i.resolve(i.dirname(e));const c=i.resolve(i.dirname(n));if(c===s||c===i.parse(c).root)return;let a;try{if(nodeSupportsBigInt()){a=r.statSync(c,{bigint:true})}else{a=r.statSync(c)}}catch(e){if(e.code==="ENOENT")return;throw e}if(a.ino&&a.dev&&a.ino===t.ino&&a.dev===t.dev){throw new Error(errMsg(e,n,o))}return checkParentPathsSync(e,t,c,o)}function isSrcSubdir(e,t){const n=i.resolve(e).split(i.sep).filter(e=>e);const r=i.resolve(t).split(i.sep).filter(e=>e);return n.reduce((e,t,n)=>e&&r[n]===t,true)}function errMsg(e,t,n){return`Cannot ${n} '${e}' to a subdirectory of itself, '${t}'.`}e.exports={checkPaths:checkPaths,checkPathsSync:checkPathsSync,checkParentPaths:checkParentPaths,checkParentPathsSync:checkParentPathsSync,isSrcSubdir:isSrcSubdir}},129:function(e){e.exports=require("child_process")},149:function(e,t,n){"use strict";const r=n(676).fromCallback;const i=n(622);const o=n(598);const s=n(727);const c=n(322).pathExists;function createFile(e,t){function makeFile(){o.writeFile(e,"",e=>{if(e)return t(e);t()})}o.stat(e,(n,r)=>{if(!n&&r.isFile())return t();const o=i.dirname(e);c(o,(e,n)=>{if(e)return t(e);if(n)return makeFile();s.mkdirs(o,e=>{if(e)return t(e);makeFile()})})})}function createFileSync(e){let t;try{t=o.statSync(e)}catch(e){}if(t&&t.isFile())return;const n=i.dirname(e);if(!o.existsSync(n)){s.mkdirsSync(n)}o.writeFileSync(e,"")}e.exports={createFile:r(createFile),createFileSync:createFileSync}},171:function(e,t,n){"use strict";const r=n(676).fromCallback;const i=n(469);i.outputJson=r(n(695));i.outputJsonSync=n(628);i.outputJSON=i.outputJson;i.outputJSONSync=i.outputJsonSync;i.writeJSON=i.writeJson;i.writeJSONSync=i.writeJsonSync;i.readJSON=i.readJson;i.readJSONSync=i.readJsonSync;e.exports=i},191:function(e){e.exports=require("querystring")},211:function(e){e.exports=require("https")},226:function(e,t,n){"use strict";e.exports=Object.assign({},n(869),n(43),n(774),n(615),n(472),n(171),n(727),n(959),n(353),n(517),n(322),n(723));const r=n(747);if(Object.getOwnPropertyDescriptor(r,"promises")){Object.defineProperty(e.exports,"promises",{get(){return r.promises}})}},250:function(e,t,n){var r=n(619);var i=process.cwd;var o=null;var s=process.env.GRACEFUL_FS_PLATFORM||process.platform;process.cwd=function(){if(!o)o=i.call(process);return o};try{process.cwd()}catch(e){}var c=process.chdir;process.chdir=function(e){o=null;c.call(process,e)};e.exports=patch;function patch(e){if(r.hasOwnProperty("O_SYMLINK")&&process.version.match(/^v0\.6\.[0-2]|^v0\.5\./)){patchLchmod(e)}if(!e.lutimes){patchLutimes(e)}e.chown=chownFix(e.chown);e.fchown=chownFix(e.fchown);e.lchown=chownFix(e.lchown);e.chmod=chmodFix(e.chmod);e.fchmod=chmodFix(e.fchmod);e.lchmod=chmodFix(e.lchmod);e.chownSync=chownFixSync(e.chownSync);e.fchownSync=chownFixSync(e.fchownSync);e.lchownSync=chownFixSync(e.lchownSync);e.chmodSync=chmodFixSync(e.chmodSync);e.fchmodSync=chmodFixSync(e.fchmodSync);e.lchmodSync=chmodFixSync(e.lchmodSync);e.stat=statFix(e.stat);e.fstat=statFix(e.fstat);e.lstat=statFix(e.lstat);e.statSync=statFixSync(e.statSync);e.fstatSync=statFixSync(e.fstatSync);e.lstatSync=statFixSync(e.lstatSync);if(!e.lchmod){e.lchmod=function(e,t,n){if(n)process.nextTick(n)};e.lchmodSync=function(){}}if(!e.lchown){e.lchown=function(e,t,n,r){if(r)process.nextTick(r)};e.lchownSync=function(){}}if(s==="win32"){e.rename=function(t){return function(n,r,i){var o=Date.now();var s=0;t(n,r,function CB(c){if(c&&(c.code==="EACCES"||c.code==="EPERM")&&Date.now()-o<6e4){setTimeout(function(){e.stat(r,function(e,o){if(e&&e.code==="ENOENT")t(n,r,CB);else i(c)})},s);if(s<100)s+=10;return}if(i)i(c)})}}(e.rename)}e.read=function(t){function read(n,r,i,o,s,c){var a;if(c&&typeof c==="function"){var u=0;a=function(f,l,d){if(f&&f.code==="EAGAIN"&&u<10){u++;return t.call(e,n,r,i,o,s,a)}c.apply(this,arguments)}}return t.call(e,n,r,i,o,s,a)}read.__proto__=t;return read}(e.read);e.readSync=function(t){return function(n,r,i,o,s){var c=0;while(true){try{return t.call(e,n,r,i,o,s)}catch(e){if(e.code==="EAGAIN"&&c<10){c++;continue}throw e}}}}(e.readSync);function patchLchmod(e){e.lchmod=function(t,n,i){e.open(t,r.O_WRONLY|r.O_SYMLINK,n,function(t,r){if(t){if(i)i(t);return}e.fchmod(r,n,function(t){e.close(r,function(e){if(i)i(t||e)})})})};e.lchmodSync=function(t,n){var i=e.openSync(t,r.O_WRONLY|r.O_SYMLINK,n);var o=true;var s;try{s=e.fchmodSync(i,n);o=false}finally{if(o){try{e.closeSync(i)}catch(e){}}else{e.closeSync(i)}}return s}}function patchLutimes(e){if(r.hasOwnProperty("O_SYMLINK")){e.lutimes=function(t,n,i,o){e.open(t,r.O_SYMLINK,function(t,r){if(t){if(o)o(t);return}e.futimes(r,n,i,function(t){e.close(r,function(e){if(o)o(t||e)})})})};e.lutimesSync=function(t,n,i){var o=e.openSync(t,r.O_SYMLINK);var s;var c=true;try{s=e.futimesSync(o,n,i);c=false}finally{if(c){try{e.closeSync(o)}catch(e){}}else{e.closeSync(o)}}return s}}else{e.lutimes=function(e,t,n,r){if(r)process.nextTick(r)};e.lutimesSync=function(){}}}function chmodFix(t){if(!t)return t;return function(n,r,i){return t.call(e,n,r,function(e){if(chownErOk(e))e=null;if(i)i.apply(this,arguments)})}}function chmodFixSync(t){if(!t)return t;return function(n,r){try{return t.call(e,n,r)}catch(e){if(!chownErOk(e))throw e}}}function chownFix(t){if(!t)return t;return function(n,r,i,o){return t.call(e,n,r,i,function(e){if(chownErOk(e))e=null;if(o)o.apply(this,arguments)})}}function chownFixSync(t){if(!t)return t;return function(n,r,i){try{return t.call(e,n,r,i)}catch(e){if(!chownErOk(e))throw e}}}function statFix(t){if(!t)return t;return function(n,r,i){if(typeof r==="function"){i=r;r=null}function callback(e,t){if(t){if(t.uid<0)t.uid+=4294967296;if(t.gid<0)t.gid+=4294967296}if(i)i.apply(this,arguments)}return r?t.call(e,n,r,callback):t.call(e,n,callback)}}function statFixSync(t){if(!t)return t;return function(n,r){var i=r?t.call(e,n,r):t.call(e,n);if(i.uid<0)i.uid+=4294967296;if(i.gid<0)i.gid+=4294967296;return i}}function chownErOk(e){if(!e)return true;if(e.code==="ENOSYS")return true;var t=!process.getuid||process.getuid()!==0;if(t){if(e.code==="EINVAL"||e.code==="EPERM")return true}return false}}},289:function(e,t,n){"use strict";const r=n(598);const i=n(622);const o=n(781).invalidWin32Path;const s=parseInt("0777",8);function mkdirs(e,t,n,c){if(typeof t==="function"){n=t;t={}}else if(!t||typeof t!=="object"){t={mode:t}}if(process.platform==="win32"&&o(e)){const t=new Error(e+" contains invalid WIN32 path characters.");t.code="EINVAL";return n(t)}let a=t.mode;const u=t.fs||r;if(a===undefined){a=s&~process.umask()}if(!c)c=null;n=n||function(){};e=i.resolve(e);u.mkdir(e,a,r=>{if(!r){c=c||e;return n(null,c)}switch(r.code){case"ENOENT":if(i.dirname(e)===e)return n(r);mkdirs(i.dirname(e),t,(r,i)=>{if(r)n(r,i);else mkdirs(e,t,n,i)});break;default:u.stat(e,(e,t)=>{if(e||!t.isDirectory())n(r,c);else n(null,c)});break}})}e.exports=mkdirs},298:function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:true});class DeploymentError extends Error{constructor(e){super(e.message);this.code=e.code;this.name="DeploymentError"}}t.DeploymentError=DeploymentError},306:function(e,t,n){var r=n(896);var i=n(621);e.exports=expandTop;var o="\0SLASH"+Math.random()+"\0";var s="\0OPEN"+Math.random()+"\0";var c="\0CLOSE"+Math.random()+"\0";var a="\0COMMA"+Math.random()+"\0";var u="\0PERIOD"+Math.random()+"\0";function numeric(e){return parseInt(e,10)==e?parseInt(e,10):e.charCodeAt(0)}function escapeBraces(e){return e.split("\\\\").join(o).split("\\{").join(s).split("\\}").join(c).split("\\,").join(a).split("\\.").join(u)}function unescapeBraces(e){return e.split(o).join("\\").split(s).join("{").split(c).join("}").split(a).join(",").split(u).join(".")}function parseCommaParts(e){if(!e)return[""];var t=[];var n=i("{","}",e);if(!n)return e.split(",");var r=n.pre;var o=n.body;var s=n.post;var c=r.split(",");c[c.length-1]+="{"+o+"}";var a=parseCommaParts(s);if(s.length){c[c.length-1]+=a.shift();c.push.apply(c,a)}t.push.apply(t,c);return t}function expandTop(e){if(!e)return[];if(e.substr(0,2)==="{}"){e="\\{\\}"+e.substr(2)}return expand(escapeBraces(e),true).map(unescapeBraces)}function identity(e){return e}function embrace(e){return"{"+e+"}"}function isPadded(e){return/^-?0\d/.test(e)}function lte(e,t){return e<=t}function gte(e,t){return e>=t}function expand(e,t){var n=[];var o=i("{","}",e);if(!o||/\$$/.test(o.pre))return[e];var s=/^-?\d+\.\.-?\d+(?:\.\.-?\d+)?$/.test(o.body);var a=/^[a-zA-Z]\.\.[a-zA-Z](?:\.\.-?\d+)?$/.test(o.body);var u=s||a;var f=o.body.indexOf(",")>=0;if(!u&&!f){if(o.post.match(/,.*\}/)){e=o.pre+"{"+o.body+c+o.post;return expand(e)}return[e]}var l;if(u){l=o.body.split(/\.\./)}else{l=parseCommaParts(o.body);if(l.length===1){l=expand(l[0],false).map(embrace);if(l.length===1){var d=o.post.length?expand(o.post,false):[""];return d.map(function(e){return o.pre+l[0]+e})}}}var y=o.pre;var d=o.post.length?expand(o.post,false):[""];var h;if(u){var p=numeric(l[0]);var m=numeric(l[1]);var g=Math.max(l[0].length,l[1].length);var v=l.length==3?Math.abs(numeric(l[2])):1;var S=lte;var w=m<p;if(w){v*=-1;S=gte}var b=l.some(isPadded);h=[];for(var E=p;S(E,m);E+=v){var x;if(a){x=String.fromCharCode(E);if(x==="\\")x=""}else{x=String(E);if(b){var _=g-x.length;if(_>0){var k=new Array(_+1).join("0");if(E<0)x="-"+k+x.slice(1);else x=k+x}}}h.push(x)}}else{h=r(l,function(e){return expand(e,false)})}for(var O=0;O<h.length;O++){for(var T=0;T<d.length;T++){var j=y+h[O]+d[T];if(!t||u||j)n.push(j)}}return n}},307:function(e,t,n){"use strict";const r=n(598);const i=n(622);const o=n(781).invalidWin32Path;const s=parseInt("0777",8);function mkdirsSync(e,t,n){if(!t||typeof t!=="object"){t={mode:t}}let c=t.mode;const a=t.fs||r;if(process.platform==="win32"&&o(e)){const t=new Error(e+" contains invalid WIN32 path characters.");t.code="EINVAL";throw t}if(c===undefined){c=s&~process.umask()}if(!n)n=null;e=i.resolve(e);try{a.mkdirSync(e,c);n=n||e}catch(r){if(r.code==="ENOENT"){if(i.dirname(e)===e)throw r;n=mkdirsSync(i.dirname(e),t,n);mkdirsSync(e,t,n)}else{let t;try{t=a.statSync(e)}catch(e){throw r}if(!t.isDirectory())throw r}}return n}e.exports=mkdirsSync},309:function(e,t,n){"use strict";var r=this&&this.__awaiter||function(e,t,n,r){return new(n||(n=Promise))(function(i,o){function fulfilled(e){try{step(r.next(e))}catch(e){o(e)}}function rejected(e){try{step(r["throw"](e))}catch(e){o(e)}}function step(e){e.done?i(e.value):new n(function(t){t(e.value)}).then(fulfilled,rejected)}step((r=r.apply(e,t||[])).next())})};var i=this&&this.__await||function(e){return this instanceof i?(this.v=e,this):new i(e)};var o=this&&this.__asyncValues||function(e){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var t=e[Symbol.asyncIterator],n;return t?t.call(e):(e=typeof __values==="function"?__values(e):e[Symbol.iterator](),n={},verb("next"),verb("throw"),verb("return"),n[Symbol.asyncIterator]=function(){return this},n);function verb(t){n[t]=e[t]&&function(n){return new Promise(function(r,i){n=e[t](n),settle(r,i,n.done,n.value)})}}function settle(e,t,n,r){Promise.resolve(r).then(function(t){e({value:t,done:n})},t)}};var s=this&&this.__asyncGenerator||function(e,t,n){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var r=n.apply(e,t||[]),o,s=[];return o={},verb("next"),verb("throw"),verb("return"),o[Symbol.asyncIterator]=function(){return this},o;function verb(e){if(r[e])o[e]=function(t){return new Promise(function(n,r){s.push([e,t,n,r])>1||resume(e,t)})}}function resume(e,t){try{step(r[e](t))}catch(e){settle(s[0][3],e)}}function step(e){e.value instanceof i?Promise.resolve(e.value.v).then(fulfill,reject):settle(s[0][2],e)}function fulfill(e){resume("next",e)}function reject(e){resume("throw",e)}function settle(e,t){if(e(t),s.shift(),s.length)resume(s[0][0],s[0][1])}};var c=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:true});const a=n(747);const u=n(211);const f=c(n(523));const l=n(654);const d=n(528);const y=n(298);const h=n(767);const p=e=>{if(e.message){return e.message.includes("ETIMEDOUT")||e.message.includes("ECONNREFUSED")||e.message.includes("ENOTFOUND")||e.message.includes("ECONNRESET")||e.message.includes("EAI_FAIL")||e.message.includes("socket hang up")||e.message.includes("network socket disconnected")}return false};function upload(e,t,n,c){return s(this,arguments,function*upload_1(){var s,m,g,v;const{token:S,teamId:w,apiUrl:b,userAgent:E}=n;const x=d.createDebug(n.debug);if(!e&&!S&&!w){x(`Neither 'files', 'token' nor 'teamId are present. Exiting`);return yield i(void 0)}let _=[];x("Determining necessary files for upload...");try{for(var k=o(h.deploy(e,t,n,c)),O;O=yield i(k.next()),!O.done;){const e=O.value;if(e.type==="error"){if(e.payload.code==="missing_files"){_=e.payload.missing;x(`${_.length} files are required to upload`)}else{return yield i(yield yield i(e))}}else{if(e.type==="alias-assigned"){x("Deployment succeeded on file check");return yield i(yield yield i(e))}yield yield i(e)}}}catch(e){s={error:e}}finally{try{if(O&&!O.done&&(m=k.return))yield i(m.call(k))}finally{if(s)throw s.error}}const T=_;yield yield i({type:"file_count",payload:{total:e,missing:T}});const j={};x("Building an upload list...");const P=new l.Sema(700,{capacity:700});T.map(t=>{j[t]=f.default(i=>r(this,void 0,void 0,function*(){const r=e.get(t);if(!r){x(`File ${t} is undefined. Bailing`);return i(new Error(`File ${t} is undefined`))}yield P.acquire();const o=r.names[0];const s=a.createReadStream(o);const{data:c}=r;let f;let l;try{const e=yield d.fetch(d.API_FILES,S,{agent:new u.Agent({keepAlive:true}),method:"POST",headers:{"Content-Type":"application/octet-stream","Content-Length":c.length,"x-now-digest":t,"x-now-size":c.length},body:s,teamId:w,apiUrl:b,userAgent:E},n.debug);if(e.status===200){x(`File ${t} (${r.names[0]}${r.names.length>1?` +${r.names.length}`:""}) uploaded`);l={type:"file-uploaded",payload:{sha:t,file:r}}}else if(e.status>200&&e.status<500){x(`An internal error occurred in upload request. Not retrying...`);const{error:t}=yield e.json();f=new y.DeploymentError(t)}else{x(`A server error occurred in upload request. Retrying...`);const{error:t}=yield e.json();throw new y.DeploymentError(t)}}catch(e){x(`An unexpected error occurred in upload promise:\n${e}`);f=new Error(e)}finally{s.close();s.destroy()}P.release();if(f){if(p(f)){x("Network error, retrying: "+f.message);throw f}else{x("Other error, bailing: "+f.message);return i(f)}}return l}),{retries:3,factor:2})});x("Starting upload");while(Object.keys(j).length>0){try{const e=yield i(Promise.race(Object.keys(j).map(e=>j[e])));delete j[e.payload.sha];yield yield i(e)}catch(e){return yield i(yield yield i({type:"error",payload:e}))}}x("All files uploaded");yield yield i({type:"all-files-uploaded",payload:e});try{x("Starting deployment creation");try{for(var D=o(h.deploy(e,t,n,c)),F;F=yield i(D.next()),!F.done;){const e=F.value;if(e.type==="alias-assigned"){x("Deployment is ready");return yield i(yield yield i(e))}yield yield i(e)}}catch(e){g={error:e}}finally{try{if(F&&!F.done&&(v=D.return))yield i(v.call(D))}finally{if(g)throw g.error}}}catch(e){x("An unexpected error occurred when starting deployment creation");yield yield i({type:"error",payload:e})}})}t.upload=upload},317:function(e,t,n){"use strict";var r=this&&this.__await||function(e){return this instanceof r?(this.v=e,this):new r(e)};var i=this&&this.__asyncGenerator||function(e,t,n){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var i=n.apply(e,t||[]),o,s=[];return o={},verb("next"),verb("throw"),verb("return"),o[Symbol.asyncIterator]=function(){return this},o;function verb(e){if(i[e])o[e]=function(t){return new Promise(function(n,r){s.push([e,t,n,r])>1||resume(e,t)})}}function resume(e,t){try{step(i[e](t))}catch(e){settle(s[0][3],e)}}function step(e){e.value instanceof r?Promise.resolve(e.value.v).then(fulfill,reject):settle(s[0][2],e)}function fulfill(e){resume("next",e)}function reject(e){resume("throw",e)}function settle(e,t){if(e(t),s.shift(),s.length)resume(s[0][0],s[0][1])}};var o=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:true});const s=o(n(932));const c=o(n(977));const a=n(528);const u=n(450);const f=n(528);function checkDeploymentStatus(e,t){return i(this,arguments,function*checkDeploymentStatus_1(){const{version:n}=e;const{token:i,teamId:o,apiUrl:l,userAgent:d}=t;const y=f.createDebug(t.debug);let h=e;let p=false;const m={};const g=a.getApiDeploymentsUrl({version:n,builds:e.builds,functions:e.functions});y(`Using ${n?`${n}.0`:"2.0"} API for status checks`);if(u.isDone(h)&&u.isAliasAssigned(h)){y(`Deployment is already READY and aliases are assigned. Not running status checks`);return yield r(void 0)}y("Waiting for builds and the deployment to complete...");let v=false;while(true){if(!p){const t=yield r(a.fetch(`${g}/${e.id}/builds${o?`?teamId=${o}`:""}`,i,{apiUrl:l,userAgent:d}));const n=yield r(t.json());const{builds:s=[]}=n;for(const e of s){const t=m[e.id];if(!t||t.readyState!==e.readyState){y(`Build state for '${e.entrypoint}' changed to ${e.readyState}`);yield yield r({type:"build-state-changed",payload:e})}if(e.readyState.includes("ERROR")){y(`Build '${e.entrypoint}' has errorred`);return yield r(yield yield r({type:"error",payload:e}))}m[e.id]=e}const c=s.filter(e=>u.isDone(e));if(c.length===s.length){y("All builds completed");p=true;yield yield r({type:"all-builds-completed",payload:c})}}else{const t=yield r(a.fetch(`${g}/${e.id||e.deploymentId}${o?`?teamId=${o}`:""}`,i,{apiUrl:l,userAgent:d}));const n=yield r(t.json());if(n.error){y("Deployment status check has errorred");return yield r(yield yield r({type:"error",payload:n.error}))}if(u.isReady(n)&&!v){y("Deployment state changed to READY 2");v=true;yield yield r({type:"ready",payload:n})}if(u.isAliasAssigned(n)){y("Deployment alias assigned");return yield r(yield yield r({type:"alias-assigned",payload:n}))}const s=u.isAliasError(n);if(u.isFailed(n)||s){y(s?"Alias assignment error has occurred":"Deployment has failed");return yield r(yield yield r({type:"error",payload:s?n.aliasError:n.error||n}))}}yield r(s.default(c.default("1.5s")))}})}t.checkDeploymentStatus=checkDeploymentStatus},321:function(e,t,n){e.exports=n(600)},322:function(e,t,n){"use strict";const r=n(676).fromPromise;const i=n(869);function pathExists(e){return i.access(e).then(()=>true).catch(()=>false)}e.exports={pathExists:r(pathExists),pathExistsSync:i.existsSync}},353:function(e,t,n){"use strict";const r=n(676).fromCallback;e.exports={move:r(n(500))}},357:function(e){e.exports=require("assert")},396:function(e){function make_array(e){return Array.isArray(e)?e:[e]}const t=/^\s+$/;const n=/^\\!/;const r=/^\\#/;const i="/";const o=typeof Symbol!=="undefined"?Symbol.for("node-ignore"):"node-ignore";const s=(e,t,n)=>Object.defineProperty(e,t,{value:n});const c=/([0-z])-([0-z])/g;const a=e=>e.replace(c,(e,t,n)=>t.charCodeAt(0)<=n.charCodeAt(0)?e:"");const u=[[/\\?\s+$/,e=>e.indexOf("\\")===0?" ":""],[/\\\s/g,()=>" "],[/[\\^$.|*+(){]/g,e=>`\\${e}`],[/\[([^\]/]*)($|\])/g,(e,t,n)=>n==="]"?`[${a(t)}]`:`\\${e}`],[/(?!\\)\?/g,()=>"[^/]"],[/^\//,()=>"^"],[/\//g,()=>"\\/"],[/^\^*\\\*\\\*\\\//,()=>"^(?:.*\\/)?"]];const f=[[/^(?=[^^])/,function startingReplacer(){return!/\/(?!$)/.test(this)?"(?:^|\\/)":"^"}],[/\\\/\\\*\\\*(?=\\\/|$)/g,(e,t,n)=>t+6<n.length?"(?:\\/[^\\/]+)*":"\\/.+"],[/(^|[^\\]+)\\\*(?=.+)/g,(e,t)=>`${t}[^\\/]*`],[/(\^|\\\/)?\\\*$/,(e,t)=>{const n=t?`${t}[^/]+`:"[^/]*";return`${n}(?=$|\\/$)`}],[/\\\\\\/g,()=>"\\"]];const l=[...u,[/(?:[^*/])$/,e=>`${e}(?=$|\\/)`],...f];const d=[...u,[/(?:[^*])$/,e=>`${e}(?=$|\\/$)`],...f];const y=Object.create(null);const h=(e,t,n)=>{const r=y[e];if(r){return r}const i=t?d:l;const o=i.reduce((t,n)=>t.replace(n[0],n[1].bind(e)),e);return y[e]=n?new RegExp(o,"i"):new RegExp(o)};const p=e=>e&&typeof e==="string"&&!t.test(e)&&e.indexOf("#")!==0;const m=(e,t)=>{const i=e;let o=false;if(e.indexOf("!")===0){o=true;e=e.substr(1)}e=e.replace(n,"!").replace(r,"#");const s=h(e,o,t);return{origin:i,pattern:e,negative:o,regex:s}};class IgnoreBase{constructor({ignorecase:e=true}={}){this._rules=[];this._ignorecase=e;s(this,o,true);this._initCache()}_initCache(){this._cache=Object.create(null)}add(e){this._added=false;if(typeof e==="string"){e=e.split(/\r?\n/g)}make_array(e).forEach(this._addPattern,this);if(this._added){this._initCache()}return this}addPattern(e){return this.add(e)}_addPattern(e){if(e&&e[o]){this._rules=this._rules.concat(e._rules);this._added=true;return}if(p(e)){const t=m(e,this._ignorecase);this._added=true;this._rules.push(t)}}filter(e){return make_array(e).filter(e=>this._filter(e))}createFilter(){return e=>this._filter(e)}ignores(e){return!this._filter(e)}_filter(e,t){if(!e){return false}if(e in this._cache){return this._cache[e]}if(!t){t=e.split(i)}t.pop();return this._cache[e]=t.length?this._filter(t.join(i)+i,t)&&this._test(e):this._test(e)}_test(e){let t=0;this._rules.forEach(n=>{if(!(t^n.negative)){t=n.negative^n.regex.test(e)}});return!t}}if(typeof process!=="undefined"&&(process.env&&process.env.IGNORE_TEST_WIN32||process.platform==="win32")){const e=IgnoreBase.prototype._filter;const t=e=>/^\\\\\?\\/.test(e)||/[^\x00-\x80]+/.test(e)?e:e.replace(/\\/g,"/");IgnoreBase.prototype._filter=function filterWin32(n,r){n=t(n);return e.call(this,n,r)}}e.exports=(e=>new IgnoreBase(e))},412:function(e,t,n){"use strict";var r=this&&this.__awaiter||function(e,t,n,r){return new(n||(n=Promise))(function(i,o){function fulfilled(e){try{step(r.next(e))}catch(e){o(e)}}function rejected(e){try{step(r["throw"](e))}catch(e){o(e)}}function step(e){e.done?i(e.value):new n(function(t){t(e.value)}).then(fulfilled,rejected)}step((r=r.apply(e,t||[])).next())})};var i=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:true});const o=n(417);const s=i(n(226));const c=n(654);function hash(e){return o.createHash("sha1").update(e).digest("hex")}t.mapToObject=(e=>{const t={};for(const[n,r]of e){t[n]=r}return t});function hashes(e){return r(this,void 0,void 0,function*(){const t=new Map;const n=new c.Sema(100);yield Promise.all(e.map(e=>r(this,void 0,void 0,function*(){yield n.acquire();const r=yield s.default.readFile(e);const{mode:i}=yield s.default.stat(e);const o=hash(r);const c=t.get(o);if(c){c.names.push(e)}else{t.set(o,{names:[e],data:r,mode:i})}n.release()})));return t})}t.default=hashes},413:function(e){e.exports=require("stream")},417:function(e){e.exports=require("crypto")},431:function(e,t,n){"use strict";var r=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(e!=null)for(var n in e)if(Object.hasOwnProperty.call(e,n))t[n]=e[n];t["default"]=e;return t};Object.defineProperty(t,"__esModule",{value:true});const i=r(n(87));function issueCommand(e,t,n){const r=new Command(e,t,n);process.stdout.write(r.toString()+i.EOL)}t.issueCommand=issueCommand;function issue(e,t=""){issueCommand(e,{},t)}t.issue=issue;const o="::";class Command{constructor(e,t,n){if(!e){e="missing.command"}this.command=e;this.properties=t;this.message=n}toString(){let e=o+this.command;if(this.properties&&Object.keys(this.properties).length>0){e+=" ";let t=true;for(const n in this.properties){if(this.properties.hasOwnProperty(n)){const r=this.properties[n];if(r){if(t){t=false}else{e+=","}e+=`${n}=${escapeProperty(r)}`}}}}e+=`${o}${escapeData(this.message)}`;return e}}function escapeData(e){return(e||"").replace(/%/g,"%25").replace(/\r/g,"%0D").replace(/\n/g,"%0A")}function escapeProperty(e){return(e||"").replace(/%/g,"%25").replace(/\r/g,"%0D").replace(/\n/g,"%0A").replace(/:/g,"%3A").replace(/,/g,"%2C")}},450:function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:true});t.isReady=(({readyState:e,state:t})=>e==="READY"||t==="READY");t.isFailed=(({readyState:e,state:t})=>e?e.endsWith("_ERROR")||e==="ERROR":t&&t.endsWith("_ERROR")||t==="ERROR");t.isDone=(e=>t.isReady(e)||t.isFailed(e));t.isAliasAssigned=(e=>Boolean(e.aliasAssigned));t.isAliasError=(e=>Boolean(e.aliasError))},454:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:true});function _interopDefault(e){return e&&typeof e==="object"&&"default"in e?e["default"]:e}var r=_interopDefault(n(413));var i=_interopDefault(n(605));var o=_interopDefault(n(835));var s=_interopDefault(n(211));var c=_interopDefault(n(761));const a=r.Readable;const u=Symbol("buffer");const f=Symbol("type");class Blob{constructor(){this[f]="";const e=arguments[0];const t=arguments[1];const n=[];let r=0;if(e){const t=e;const i=Number(t.length);for(let e=0;e<i;e++){const i=t[e];let o;if(i instanceof Buffer){o=i}else if(ArrayBuffer.isView(i)){o=Buffer.from(i.buffer,i.byteOffset,i.byteLength)}else if(i instanceof ArrayBuffer){o=Buffer.from(i)}else if(i instanceof Blob){o=i[u]}else{o=Buffer.from(typeof i==="string"?i:String(i))}r+=o.length;n.push(o)}}this[u]=Buffer.concat(n);let i=t&&t.type!==undefined&&String(t.type).toLowerCase();if(i&&!/[^\u0020-\u007E]/.test(i)){this[f]=i}}get size(){return this[u].length}get type(){return this[f]}text(){return Promise.resolve(this[u].toString())}arrayBuffer(){const e=this[u];const t=e.buffer.slice(e.byteOffset,e.byteOffset+e.byteLength);return Promise.resolve(t)}stream(){const e=new a;e._read=function(){};e.push(this[u]);e.push(null);return e}toString(){return"[object Blob]"}slice(){const e=this.size;const t=arguments[0];const n=arguments[1];let r,i;if(t===undefined){r=0}else if(t<0){r=Math.max(e+t,0)}else{r=Math.min(t,e)}if(n===undefined){i=e}else if(n<0){i=Math.max(e+n,0)}else{i=Math.min(n,e)}const o=Math.max(i-r,0);const s=this[u];const c=s.slice(r,r+o);const a=new Blob([],{type:arguments[2]});a[u]=c;return a}}Object.defineProperties(Blob.prototype,{size:{enumerable:true},type:{enumerable:true},slice:{enumerable:true}});Object.defineProperty(Blob.prototype,Symbol.toStringTag,{value:"Blob",writable:false,enumerable:false,configurable:true});function FetchError(e,t,n){Error.call(this,e);this.message=e;this.type=t;if(n){this.code=this.errno=n.code}Error.captureStackTrace(this,this.constructor)}FetchError.prototype=Object.create(Error.prototype);FetchError.prototype.constructor=FetchError;FetchError.prototype.name="FetchError";let l;try{l=n(18).convert}catch(e){}const d=Symbol("Body internals");const y=r.PassThrough;function Body(e){var t=this;var n=arguments.length>1&&arguments[1]!==undefined?arguments[1]:{},i=n.size;let o=i===undefined?0:i;var s=n.timeout;let c=s===undefined?0:s;if(e==null){e=null}else if(isURLSearchParams(e)){e=Buffer.from(e.toString())}else if(isBlob(e))   ;else if(Buffer.isBuffer(e))   ;else if(Object.prototype.toString.call(e)==="[object ArrayBuffer]"){e=Buffer.from(e)}else if(ArrayBuffer.isView(e)){e=Buffer.from(e.buffer,e.byteOffset,e.byteLength)}else if(e instanceof r)   ;else{e=Buffer.from(String(e))}this[d]={body:e,disturbed:false,error:null};this.size=o;this.timeout=c;if(e instanceof r){e.on("error",function(e){const n=e.name==="AbortError"?e:new FetchError(`Invalid response body while trying to fetch ${t.url}: ${e.message}`,"system",e);t[d].error=n})}}Body.prototype={get body(){return this[d].body},get bodyUsed(){return this[d].disturbed},arrayBuffer(){return consumeBody.call(this).then(function(e){return e.buffer.slice(e.byteOffset,e.byteOffset+e.byteLength)})},blob(){let e=this.headers&&this.headers.get("content-type")||"";return consumeBody.call(this).then(function(t){return Object.assign(new Blob([],{type:e.toLowerCase()}),{[u]:t})})},json(){var e=this;return consumeBody.call(this).then(function(t){try{return JSON.parse(t.toString())}catch(t){return Body.Promise.reject(new FetchError(`invalid json response body at ${e.url} reason: ${t.message}`,"invalid-json"))}})},text(){return consumeBody.call(this).then(function(e){return e.toString()})},buffer(){return consumeBody.call(this)},textConverted(){var e=this;return consumeBody.call(this).then(function(t){return convertBody(t,e.headers)})}};Object.defineProperties(Body.prototype,{body:{enumerable:true},bodyUsed:{enumerable:true},arrayBuffer:{enumerable:true},blob:{enumerable:true},json:{enumerable:true},text:{enumerable:true}});Body.mixIn=function(e){for(const t of Object.getOwnPropertyNames(Body.prototype)){if(!(t in e)){const n=Object.getOwnPropertyDescriptor(Body.prototype,t);Object.defineProperty(e,t,n)}}};function consumeBody(){var e=this;if(this[d].disturbed){return Body.Promise.reject(new TypeError(`body used already for: ${this.url}`))}this[d].disturbed=true;if(this[d].error){return Body.Promise.reject(this[d].error)}let t=this.body;if(t===null){return Body.Promise.resolve(Buffer.alloc(0))}if(isBlob(t)){t=t.stream()}if(Buffer.isBuffer(t)){return Body.Promise.resolve(t)}if(!(t instanceof r)){return Body.Promise.resolve(Buffer.alloc(0))}let n=[];let i=0;let o=false;return new Body.Promise(function(r,s){let c;if(e.timeout){c=setTimeout(function(){o=true;s(new FetchError(`Response timeout while trying to fetch ${e.url} (over ${e.timeout}ms)`,"body-timeout"))},e.timeout)}t.on("error",function(t){if(t.name==="AbortError"){o=true;s(t)}else{s(new FetchError(`Invalid response body while trying to fetch ${e.url}: ${t.message}`,"system",t))}});t.on("data",function(t){if(o||t===null){return}if(e.size&&i+t.length>e.size){o=true;s(new FetchError(`content size at ${e.url} over limit: ${e.size}`,"max-size"));return}i+=t.length;n.push(t)});t.on("end",function(){if(o){return}clearTimeout(c);try{r(Buffer.concat(n,i))}catch(t){s(new FetchError(`Could not create Buffer from response body for ${e.url}: ${t.message}`,"system",t))}})})}function convertBody(e,t){if(typeof l!=="function"){throw new Error("The package `encoding` must be installed to use the textConverted() function")}const n=t.get("content-type");let r="utf-8";let i,o;if(n){i=/charset=([^;]*)/i.exec(n)}o=e.slice(0,1024).toString();if(!i&&o){i=/<meta.+?charset=(['"])(.+?)\1/i.exec(o)}if(!i&&o){i=/<meta[\s]+?http-equiv=(['"])content-type\1[\s]+?content=(['"])(.+?)\2/i.exec(o);if(i){i=/charset=(.*)/i.exec(i.pop())}}if(!i&&o){i=/<\?xml.+?encoding=(['"])(.+?)\1/i.exec(o)}if(i){r=i.pop();if(r==="gb2312"||r==="gbk"){r="gb18030"}}return l(e,"UTF-8",r).toString()}function isURLSearchParams(e){if(typeof e!=="object"||typeof e.append!=="function"||typeof e.delete!=="function"||typeof e.get!=="function"||typeof e.getAll!=="function"||typeof e.has!=="function"||typeof e.set!=="function"){return false}return e.constructor.name==="URLSearchParams"||Object.prototype.toString.call(e)==="[object URLSearchParams]"||typeof e.sort==="function"}function isBlob(e){return typeof e==="object"&&typeof e.arrayBuffer==="function"&&typeof e.type==="string"&&typeof e.stream==="function"&&typeof e.constructor==="function"&&typeof e.constructor.name==="string"&&/^(Blob|File)$/.test(e.constructor.name)&&/^(Blob|File)$/.test(e[Symbol.toStringTag])}function clone(e){let t,n;let i=e.body;if(e.bodyUsed){throw new Error("cannot clone body after it is used")}if(i instanceof r&&typeof i.getBoundary!=="function"){t=new y;n=new y;i.pipe(t);i.pipe(n);e[d].body=t;i=n}return i}function extractContentType(e){if(e===null){return null}else if(typeof e==="string"){return"text/plain;charset=UTF-8"}else if(isURLSearchParams(e)){return"application/x-www-form-urlencoded;charset=UTF-8"}else if(isBlob(e)){return e.type||null}else if(Buffer.isBuffer(e)){return null}else if(Object.prototype.toString.call(e)==="[object ArrayBuffer]"){return null}else if(ArrayBuffer.isView(e)){return null}else if(typeof e.getBoundary==="function"){return`multipart/form-data;boundary=${e.getBoundary()}`}else if(e instanceof r){return null}else{return"text/plain;charset=UTF-8"}}function getTotalBytes(e){const t=e.body;if(t===null){return 0}else if(isBlob(t)){return t.size}else if(Buffer.isBuffer(t)){return t.length}else if(t&&typeof t.getLengthSync==="function"){if(t._lengthRetrievers&&t._lengthRetrievers.length==0||t.hasKnownLength&&t.hasKnownLength()){return t.getLengthSync()}return null}else{return null}}function writeToStream(e,t){const n=t.body;if(n===null){e.end()}else if(isBlob(n)){n.stream().pipe(e)}else if(Buffer.isBuffer(n)){e.write(n);e.end()}else{n.pipe(e)}}Body.Promise=global.Promise;const h=/[^\^_`a-zA-Z\-0-9!#$%&'*+.|~]/;const p=/[^\t\x20-\x7e\x80-\xff]/;function validateName(e){e=`${e}`;if(h.test(e)||e===""){throw new TypeError(`${e} is not a legal HTTP header name`)}}function validateValue(e){e=`${e}`;if(p.test(e)){throw new TypeError(`${e} is not a legal HTTP header value`)}}function find(e,t){t=t.toLowerCase();for(const n in e){if(n.toLowerCase()===t){return n}}return undefined}const m=Symbol("map");class Headers{constructor(){let e=arguments.length>0&&arguments[0]!==undefined?arguments[0]:undefined;this[m]=Object.create(null);if(e instanceof Headers){const t=e.raw();const n=Object.keys(t);for(const e of n){for(const n of t[e]){this.append(e,n)}}return}if(e==null)   ;else if(typeof e==="object"){const t=e[Symbol.iterator];if(t!=null){if(typeof t!=="function"){throw new TypeError("Header pairs must be iterable")}const n=[];for(const t of e){if(typeof t!=="object"||typeof t[Symbol.iterator]!=="function"){throw new TypeError("Each header pair must be iterable")}n.push(Array.from(t))}for(const e of n){if(e.length!==2){throw new TypeError("Each header pair must be a name/value tuple")}this.append(e[0],e[1])}}else{for(const t of Object.keys(e)){const n=e[t];this.append(t,n)}}}else{throw new TypeError("Provided initializer must be an object")}}get(e){e=`${e}`;validateName(e);const t=find(this[m],e);if(t===undefined){return null}return this[m][t].join(", ")}forEach(e){let t=arguments.length>1&&arguments[1]!==undefined?arguments[1]:undefined;let n=getHeaders(this);let r=0;while(r<n.length){var i=n[r];const o=i[0],s=i[1];e.call(t,s,o,this);n=getHeaders(this);r++}}set(e,t){e=`${e}`;t=`${t}`;validateName(e);validateValue(t);const n=find(this[m],e);this[m][n!==undefined?n:e]=[t]}append(e,t){e=`${e}`;t=`${t}`;validateName(e);validateValue(t);const n=find(this[m],e);if(n!==undefined){this[m][n].push(t)}else{this[m][e]=[t]}}has(e){e=`${e}`;validateName(e);return find(this[m],e)!==undefined}delete(e){e=`${e}`;validateName(e);const t=find(this[m],e);if(t!==undefined){delete this[m][t]}}raw(){return this[m]}keys(){return createHeadersIterator(this,"key")}values(){return createHeadersIterator(this,"value")}[Symbol.iterator](){return createHeadersIterator(this,"key+value")}}Headers.prototype.entries=Headers.prototype[Symbol.iterator];Object.defineProperty(Headers.prototype,Symbol.toStringTag,{value:"Headers",writable:false,enumerable:false,configurable:true});Object.defineProperties(Headers.prototype,{get:{enumerable:true},forEach:{enumerable:true},set:{enumerable:true},append:{enumerable:true},has:{enumerable:true},delete:{enumerable:true},keys:{enumerable:true},values:{enumerable:true},entries:{enumerable:true}});function getHeaders(e){let t=arguments.length>1&&arguments[1]!==undefined?arguments[1]:"key+value";const n=Object.keys(e[m]).sort();return n.map(t==="key"?function(e){return e.toLowerCase()}:t==="value"?function(t){return e[m][t].join(", ")}:function(t){return[t.toLowerCase(),e[m][t].join(", ")]})}const g=Symbol("internal");function createHeadersIterator(e,t){const n=Object.create(v);n[g]={target:e,kind:t,index:0};return n}const v=Object.setPrototypeOf({next(){if(!this||Object.getPrototypeOf(this)!==v){throw new TypeError("Value of `this` is not a HeadersIterator")}var e=this[g];const t=e.target,n=e.kind,r=e.index;const i=getHeaders(t,n);const o=i.length;if(r>=o){return{value:undefined,done:true}}this[g].index=r+1;return{value:i[r],done:false}}},Object.getPrototypeOf(Object.getPrototypeOf([][Symbol.iterator]())));Object.defineProperty(v,Symbol.toStringTag,{value:"HeadersIterator",writable:false,enumerable:false,configurable:true});function exportNodeCompatibleHeaders(e){const t=Object.assign({__proto__:null},e[m]);const n=find(e[m],"Host");if(n!==undefined){t[n]=t[n][0]}return t}function createHeadersLenient(e){const t=new Headers;for(const n of Object.keys(e)){if(h.test(n)){continue}if(Array.isArray(e[n])){for(const r of e[n]){if(p.test(r)){continue}if(t[m][n]===undefined){t[m][n]=[r]}else{t[m][n].push(r)}}}else if(!p.test(e[n])){t[m][n]=[e[n]]}}return t}const S=Symbol("Response internals");const w=i.STATUS_CODES;class Response{constructor(){let e=arguments.length>0&&arguments[0]!==undefined?arguments[0]:null;let t=arguments.length>1&&arguments[1]!==undefined?arguments[1]:{};Body.call(this,e,t);const n=t.status||200;const r=new Headers(t.headers);if(e!=null&&!r.has("Content-Type")){const t=extractContentType(e);if(t){r.append("Content-Type",t)}}this[S]={url:t.url,status:n,statusText:t.statusText||w[n],headers:r,counter:t.counter}}get url(){return this[S].url||""}get status(){return this[S].status}get ok(){return this[S].status>=200&&this[S].status<300}get redirected(){return this[S].counter>0}get statusText(){return this[S].statusText}get headers(){return this[S].headers}clone(){return new Response(clone(this),{url:this.url,status:this.status,statusText:this.statusText,headers:this.headers,ok:this.ok,redirected:this.redirected})}}Body.mixIn(Response.prototype);Object.defineProperties(Response.prototype,{url:{enumerable:true},status:{enumerable:true},ok:{enumerable:true},redirected:{enumerable:true},statusText:{enumerable:true},headers:{enumerable:true},clone:{enumerable:true}});Object.defineProperty(Response.prototype,Symbol.toStringTag,{value:"Response",writable:false,enumerable:false,configurable:true});const b=Symbol("Request internals");const E=o.parse;const x=o.format;const _="destroy"in r.Readable.prototype;function isRequest(e){return typeof e==="object"&&typeof e[b]==="object"}function isAbortSignal(e){const t=e&&typeof e==="object"&&Object.getPrototypeOf(e);return!!(t&&t.constructor.name==="AbortSignal")}class Request{constructor(e){let t=arguments.length>1&&arguments[1]!==undefined?arguments[1]:{};let n;if(!isRequest(e)){if(e&&e.href){n=E(e.href)}else{n=E(`${e}`)}e={}}else{n=E(e.url)}let r=t.method||e.method||"GET";r=r.toUpperCase();if((t.body!=null||isRequest(e)&&e.body!==null)&&(r==="GET"||r==="HEAD")){throw new TypeError("Request with GET/HEAD method cannot have body")}let i=t.body!=null?t.body:isRequest(e)&&e.body!==null?clone(e):null;Body.call(this,i,{timeout:t.timeout||e.timeout||0,size:t.size||e.size||0});const o=new Headers(t.headers||e.headers||{});if(i!=null&&!o.has("Content-Type")){const e=extractContentType(i);if(e){o.append("Content-Type",e)}}let s=isRequest(e)?e.signal:null;if("signal"in t)s=t.signal;if(s!=null&&!isAbortSignal(s)){throw new TypeError("Expected signal to be an instanceof AbortSignal")}this[b]={method:r,redirect:t.redirect||e.redirect||"follow",headers:o,parsedURL:n,signal:s};this.follow=t.follow!==undefined?t.follow:e.follow!==undefined?e.follow:20;this.compress=t.compress!==undefined?t.compress:e.compress!==undefined?e.compress:true;this.counter=t.counter||e.counter||0;this.agent=t.agent||e.agent}get method(){return this[b].method}get url(){return x(this[b].parsedURL)}get headers(){return this[b].headers}get redirect(){return this[b].redirect}get signal(){return this[b].signal}clone(){return new Request(this)}}Body.mixIn(Request.prototype);Object.defineProperty(Request.prototype,Symbol.toStringTag,{value:"Request",writable:false,enumerable:false,configurable:true});Object.defineProperties(Request.prototype,{method:{enumerable:true},url:{enumerable:true},headers:{enumerable:true},redirect:{enumerable:true},clone:{enumerable:true},signal:{enumerable:true}});function getNodeRequestOptions(e){const t=e[b].parsedURL;const n=new Headers(e[b].headers);if(!n.has("Accept")){n.set("Accept","*/*")}if(!t.protocol||!t.hostname){throw new TypeError("Only absolute URLs are supported")}if(!/^https?:$/.test(t.protocol)){throw new TypeError("Only HTTP(S) protocols are supported")}if(e.signal&&e.body instanceof r.Readable&&!_){throw new Error("Cancellation of streamed requests with AbortSignal is not supported in node < 8")}let i=null;if(e.body==null&&/^(POST|PUT)$/i.test(e.method)){i="0"}if(e.body!=null){const t=getTotalBytes(e);if(typeof t==="number"){i=String(t)}}if(i){n.set("Content-Length",i)}if(!n.has("User-Agent")){n.set("User-Agent","node-fetch/1.0 (+https://github.com/bitinn/node-fetch)")}if(e.compress&&!n.has("Accept-Encoding")){n.set("Accept-Encoding","gzip,deflate")}let o=e.agent;if(typeof o==="function"){o=o(t)}if(!n.has("Connection")&&!o){n.set("Connection","close")}return Object.assign({},t,{method:e.method,headers:exportNodeCompatibleHeaders(n),agent:o})}function AbortError(e){Error.call(this,e);this.type="aborted";this.message=e;Error.captureStackTrace(this,this.constructor)}AbortError.prototype=Object.create(Error.prototype);AbortError.prototype.constructor=AbortError;AbortError.prototype.name="AbortError";const k=r.PassThrough;const O=o.resolve;function fetch(e,t){if(!fetch.Promise){throw new Error("native promise missing, set fetch.Promise to your favorite alternative")}Body.Promise=fetch.Promise;return new fetch.Promise(function(n,o){const a=new Request(e,t);const u=getNodeRequestOptions(a);const f=(u.protocol==="https:"?s:i).request;const l=a.signal;let d=null;const y=function abort(){let e=new AbortError("The user aborted a request.");o(e);if(a.body&&a.body instanceof r.Readable){a.body.destroy(e)}if(!d||!d.body)return;d.body.emit("error",e)};if(l&&l.aborted){y();return}const h=function abortAndFinalize(){y();finalize()};const p=f(u);let m;if(l){l.addEventListener("abort",h)}function finalize(){p.abort();if(l)l.removeEventListener("abort",h);clearTimeout(m)}if(a.timeout){p.once("socket",function(e){m=setTimeout(function(){o(new FetchError(`network timeout at: ${a.url}`,"request-timeout"));finalize()},a.timeout)})}p.on("error",function(e){o(new FetchError(`request to ${a.url} failed, reason: ${e.message}`,"system",e));finalize()});p.on("response",function(e){clearTimeout(m);const t=createHeadersLenient(e.headers);if(fetch.isRedirect(e.statusCode)){const r=t.get("Location");const i=r===null?null:O(a.url,r);switch(a.redirect){case"error":o(new FetchError(`redirect mode is set to error: ${a.url}`,"no-redirect"));finalize();return;case"manual":if(i!==null){try{t.set("Location",i)}catch(e){o(e)}}break;case"follow":if(i===null){break}if(a.counter>=a.follow){o(new FetchError(`maximum redirect reached at: ${a.url}`,"max-redirect"));finalize();return}const r={headers:new Headers(a.headers),follow:a.follow,counter:a.counter+1,agent:a.agent,compress:a.compress,method:a.method,body:a.body,signal:a.signal,timeout:a.timeout};if(e.statusCode!==303&&a.body&&getTotalBytes(a)===null){o(new FetchError("Cannot follow redirect with body being a readable stream","unsupported-redirect"));finalize();return}if(e.statusCode===303||(e.statusCode===301||e.statusCode===302)&&a.method==="POST"){r.method="GET";r.body=undefined;r.headers.delete("content-length")}n(fetch(new Request(i,r)));finalize();return}}e.once("end",function(){if(l)l.removeEventListener("abort",h)});let r=e.pipe(new k);const i={url:a.url,status:e.statusCode,statusText:e.statusMessage,headers:t,size:a.size,timeout:a.timeout,counter:a.counter};const s=t.get("Content-Encoding");if(!a.compress||a.method==="HEAD"||s===null||e.statusCode===204||e.statusCode===304){d=new Response(r,i);n(d);return}const u={flush:c.Z_SYNC_FLUSH,finishFlush:c.Z_SYNC_FLUSH};if(s=="gzip"||s=="x-gzip"){r=r.pipe(c.createGunzip(u));d=new Response(r,i);n(d);return}if(s=="deflate"||s=="x-deflate"){const t=e.pipe(new k);t.once("data",function(e){if((e[0]&15)===8){r=r.pipe(c.createInflate())}else{r=r.pipe(c.createInflateRaw())}d=new Response(r,i);n(d)});return}if(s=="br"&&typeof c.createBrotliDecompress==="function"){r=r.pipe(c.createBrotliDecompress());d=new Response(r,i);n(d);return}d=new Response(r,i);n(d)});writeToStream(p,a)})}fetch.isRedirect=function(e){return e===301||e===302||e===303||e===307||e===308};fetch.Promise=global.Promise;e.exports=t=fetch;Object.defineProperty(t,"__esModule",{value:true});t.default=t;t.Headers=Headers;t.Request=Request;t.Response=Response;t.FetchError=FetchError},469:function(e,t,n){"use strict";const r=n(676).fromCallback;const i=n(666);e.exports={readJson:r(i.readFile),readJsonSync:i.readFileSync,writeJson:r(i.writeFile),writeJsonSync:i.writeFileSync}},470:function(e,t,n){"use strict";var r=this&&this.__awaiter||function(e,t,n,r){function adopt(e){return e instanceof n?e:new n(function(t){t(e)})}return new(n||(n=Promise))(function(n,i){function fulfilled(e){try{step(r.next(e))}catch(e){i(e)}}function rejected(e){try{step(r["throw"](e))}catch(e){i(e)}}function step(e){e.done?n(e.value):adopt(e.value).then(fulfilled,rejected)}step((r=r.apply(e,t||[])).next())})};var i=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(e!=null)for(var n in e)if(Object.hasOwnProperty.call(e,n))t[n]=e[n];t["default"]=e;return t};Object.defineProperty(t,"__esModule",{value:true});const o=n(431);const s=i(n(87));const c=i(n(622));var a;(function(e){e[e["Success"]=0]="Success";e[e["Failure"]=1]="Failure"})(a=t.ExitCode||(t.ExitCode={}));function exportVariable(e,t){process.env[e]=t;o.issueCommand("set-env",{name:e},t)}t.exportVariable=exportVariable;function setSecret(e){o.issueCommand("add-mask",{},e)}t.setSecret=setSecret;function addPath(e){o.issueCommand("add-path",{},e);process.env["PATH"]=`${e}${c.delimiter}${process.env["PATH"]}`}t.addPath=addPath;function getInput(e,t){const n=process.env[`INPUT_${e.replace(/ /g,"_").toUpperCase()}`]||"";if(t&&t.required&&!n){throw new Error(`Input required and not supplied: ${e}`)}return n.trim()}t.getInput=getInput;function setOutput(e,t){o.issueCommand("set-output",{name:e},t)}t.setOutput=setOutput;function setFailed(e){process.exitCode=a.Failure;error(e)}t.setFailed=setFailed;function debug(e){o.issueCommand("debug",{},e)}t.debug=debug;function error(e){o.issue("error",e)}t.error=error;function warning(e){o.issue("warning",e)}t.warning=warning;function info(e){process.stdout.write(e+s.EOL)}t.info=info;function startGroup(e){o.issue("group",e)}t.startGroup=startGroup;function endGroup(){o.issue("endgroup")}t.endGroup=endGroup;function group(e,t){return r(this,void 0,void 0,function*(){startGroup(e);let n;try{n=yield t()}finally{endGroup()}return n})}t.group=group;function saveState(e,t){o.issueCommand("save-state",{name:e},t)}t.saveState=saveState;function getState(e){return process.env[`STATE_${e}`]||""}t.getState=getState},472:function(e,t,n){"use strict";const r=n(149);const i=n(900);const o=n(849);e.exports={createFile:r.createFile,createFileSync:r.createFileSync,ensureFile:r.createFile,ensureFileSync:r.createFileSync,createLink:i.createLink,createLinkSync:i.createLinkSync,ensureLink:i.createLink,ensureLinkSync:i.createLinkSync,createSymlink:o.createSymlink,createSymlinkSync:o.createSymlinkSync,ensureSymlink:o.createSymlink,ensureSymlinkSync:o.createSymlinkSync}},474:function(e,t,n){"use strict";const r=n(598);const i=n(622);const o=n(357);const s=process.platform==="win32";function defaults(e){const t=["unlink","chmod","stat","lstat","rmdir","readdir"];t.forEach(t=>{e[t]=e[t]||r[t];t=t+"Sync";e[t]=e[t]||r[t]});e.maxBusyTries=e.maxBusyTries||3}function rimraf(e,t,n){let r=0;if(typeof t==="function"){n=t;t={}}o(e,"rimraf: missing path");o.strictEqual(typeof e,"string","rimraf: path should be a string");o.strictEqual(typeof n,"function","rimraf: callback function required");o(t,"rimraf: invalid options argument provided");o.strictEqual(typeof t,"object","rimraf: options should be object");defaults(t);rimraf_(e,t,function CB(i){if(i){if((i.code==="EBUSY"||i.code==="ENOTEMPTY"||i.code==="EPERM")&&r<t.maxBusyTries){r++;const n=r*100;return setTimeout(()=>rimraf_(e,t,CB),n)}if(i.code==="ENOENT")i=null}n(i)})}function rimraf_(e,t,n){o(e);o(t);o(typeof n==="function");t.lstat(e,(r,i)=>{if(r&&r.code==="ENOENT"){return n(null)}if(r&&r.code==="EPERM"&&s){return fixWinEPERM(e,t,r,n)}if(i&&i.isDirectory()){return rmdir(e,t,r,n)}t.unlink(e,r=>{if(r){if(r.code==="ENOENT"){return n(null)}if(r.code==="EPERM"){return s?fixWinEPERM(e,t,r,n):rmdir(e,t,r,n)}if(r.code==="EISDIR"){return rmdir(e,t,r,n)}}return n(r)})})}function fixWinEPERM(e,t,n,r){o(e);o(t);o(typeof r==="function");if(n){o(n instanceof Error)}t.chmod(e,438,i=>{if(i){r(i.code==="ENOENT"?null:n)}else{t.stat(e,(i,o)=>{if(i){r(i.code==="ENOENT"?null:n)}else if(o.isDirectory()){rmdir(e,t,n,r)}else{t.unlink(e,r)}})}})}function fixWinEPERMSync(e,t,n){let r;o(e);o(t);if(n){o(n instanceof Error)}try{t.chmodSync(e,438)}catch(e){if(e.code==="ENOENT"){return}else{throw n}}try{r=t.statSync(e)}catch(e){if(e.code==="ENOENT"){return}else{throw n}}if(r.isDirectory()){rmdirSync(e,t,n)}else{t.unlinkSync(e)}}function rmdir(e,t,n,r){o(e);o(t);if(n){o(n instanceof Error)}o(typeof r==="function");t.rmdir(e,i=>{if(i&&(i.code==="ENOTEMPTY"||i.code==="EEXIST"||i.code==="EPERM")){rmkids(e,t,r)}else if(i&&i.code==="ENOTDIR"){r(n)}else{r(i)}})}function rmkids(e,t,n){o(e);o(t);o(typeof n==="function");t.readdir(e,(r,o)=>{if(r)return n(r);let s=o.length;let c;if(s===0)return t.rmdir(e,n);o.forEach(r=>{rimraf(i.join(e,r),t,r=>{if(c){return}if(r)return n(c=r);if(--s===0){t.rmdir(e,n)}})})})}function rimrafSync(e,t){let n;t=t||{};defaults(t);o(e,"rimraf: missing path");o.strictEqual(typeof e,"string","rimraf: path should be a string");o(t,"rimraf: missing options");o.strictEqual(typeof t,"object","rimraf: options should be object");try{n=t.lstatSync(e)}catch(n){if(n.code==="ENOENT"){return}if(n.code==="EPERM"&&s){fixWinEPERMSync(e,t,n)}}try{if(n&&n.isDirectory()){rmdirSync(e,t,null)}else{t.unlinkSync(e)}}catch(n){if(n.code==="ENOENT"){return}else if(n.code==="EPERM"){return s?fixWinEPERMSync(e,t,n):rmdirSync(e,t,n)}else if(n.code!=="EISDIR"){throw n}rmdirSync(e,t,n)}}function rmdirSync(e,t,n){o(e);o(t);if(n){o(n instanceof Error)}try{t.rmdirSync(e)}catch(r){if(r.code==="ENOTDIR"){throw n}else if(r.code==="ENOTEMPTY"||r.code==="EEXIST"||r.code==="EPERM"){rmkidsSync(e,t)}else if(r.code!=="ENOENT"){throw r}}}function rmkidsSync(e,t){o(e);o(t);t.readdirSync(e).forEach(n=>rimrafSync(i.join(e,n),t));if(s){const n=Date.now();do{try{const n=t.rmdirSync(e,t);return n}catch(e){}}while(Date.now()-n<500)}else{const n=t.rmdirSync(e,t);return n}}e.exports=rimraf;rimraf.sync=rimrafSync},477:function(e,t,n){"use strict";function __export(e){for(var n in e)if(!t.hasOwnProperty(n))t[n]=e[n]}var r=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:true});if(!Symbol.asyncIterator){Symbol.asyncIterator=Symbol.for("Symbol.asyncIterator")}const i=r(n(741));t.createDeployment=i.default(2);t.createLegacyDeployment=i.default(1);__export(n(298))},500:function(e,t,n){"use strict";const r=n(747);const i=n(622);const o=n(774).copy;const s=n(723).remove;const c=n(727).mkdirp;const a=n(322).pathExists;const u=n(127);function move(e,t,n,r){if(typeof n==="function"){r=n;n={}}const o=n.overwrite||n.clobber||false;u.checkPaths(e,t,"move",(n,s)=>{if(n)return r(n);const{srcStat:a}=s;u.checkParentPaths(e,a,t,"move",n=>{if(n)return r(n);c(i.dirname(t),n=>{if(n)return r(n);return doRename(e,t,o,r)})})})}function doRename(e,t,n,r){if(n){return s(t,i=>{if(i)return r(i);return rename(e,t,n,r)})}a(t,(i,o)=>{if(i)return r(i);if(o)return r(new Error("dest already exists."));return rename(e,t,n,r)})}function rename(e,t,n,i){r.rename(e,t,r=>{if(!r)return i();if(r.code!=="EXDEV")return i(r);return moveAcrossDevice(e,t,n,i)})}function moveAcrossDevice(e,t,n,r){const i={overwrite:n,errorOnExist:true};o(e,t,i,t=>{if(t)return r(t);return s(e,r)})}e.exports=move},517:function(e,t,n){"use strict";const r=n(676).fromCallback;const i=n(598);const o=n(622);const s=n(727);const c=n(322).pathExists;function outputFile(e,t,n,r){if(typeof n==="function"){r=n;n="utf8"}const a=o.dirname(e);c(a,(o,c)=>{if(o)return r(o);if(c)return i.writeFile(e,t,n,r);s.mkdirs(a,o=>{if(o)return r(o);i.writeFile(e,t,n,r)})})}function outputFileSync(e,...t){const n=o.dirname(e);if(i.existsSync(n)){return i.writeFileSync(e,...t)}s.mkdirsSync(n);i.writeFileSync(e,...t)}e.exports={outputFile:r(outputFile),outputFileSync:outputFileSync}},523:function(e,t,n){var r=n(321);function retry(e,t){function run(n,i){var o=t||{};var s=r.operation(o);function bail(e){i(e||new Error("Aborted"))}function onError(e,t){if(e.bail){bail(e);return}if(!s.retry(e)){i(s.mainError())}else if(o.onRetry){o.onRetry(e,t)}}function runAttempt(t){var r;try{r=e(bail,t)}catch(e){onError(e,t);return}Promise.resolve(r).then(n).catch(function catchIt(e){onError(e,t)})}s.attempt(runAttempt)}return new Promise(run)}e.exports=retry},528:function(e,t,n){"use strict";var r=this&&this.__awaiter||function(e,t,n,r){return new(n||(n=Promise))(function(i,o){function fulfilled(e){try{step(r.next(e))}catch(e){o(e)}}function rejected(e){try{step(r["throw"](e))}catch(e){o(e)}}function step(e){e.done?i(e.value):new n(function(t){t(e.value)}).then(fulfilled,rejected)}step((r=r.apply(e,t||[])).next())})};var i=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:true});const o=n(835);const s=i(n(454));const c=n(622);const a=i(n(191));const u=i(n(396));const f=n(106);const l=n(654);const d=n(226);const y=new l.Sema(10);t.API_FILES="/v2/now/files";t.API_DELETE_DEPLOYMENTS_LEGACY="/v2/now/deployments";t.EVENTS=new Set(["hashes-calculated","file_count","file-uploaded","all-files-uploaded","created","ready","alias-assigned","warning","error","build-state-changed"]);function getApiDeploymentsUrl(e){if(e&&e.version!==2){return"/v3/now/deployments"}if(e&&e.builds&&!e.functions){return"/v10/now/deployments"}return"/v11/now/deployments"}t.getApiDeploymentsUrl=getApiDeploymentsUrl;function parseNowJSON(e){return r(this,void 0,void 0,function*(){if(!e){return{}}try{const t=yield d.readFile(e,"utf8");return JSON.parse(t)}catch(e){console.error(e);return{}}})}t.parseNowJSON=parseNowJSON;const h=function(e,t){return r(this,void 0,void 0,function*(){try{return yield d.readFile(e,"utf8")}catch(e){return t}})};function getNowIgnore(e){return r(this,void 0,void 0,function*(){let t=[".hg",".git",".gitmodules",".svn",".cache",".next",".now",".npmignore",".dockerignore",".gitignore",".*.swp",".DS_Store",".wafpicke-*",".lock-wscript",".env",".env.build",".venv","npm-debug.log","config.gypi","node_modules","__pycache__/","venv/","CVS"];const n=Array.isArray(e)?yield h(c.join(e.find(e=>e.includes(".nowignore"),"")||"",".nowignore"),""):yield h(c.join(e,".nowignore"),"");const r=u.default().add(`${t.join("\n")}\n${n}`);return{ig:r,ignores:t}})}t.getNowIgnore=getNowIgnore;t.fetch=((e,t,n={},i)=>r(this,void 0,void 0,function*(){y.acquire();const r=createDebug(i);let c;e=`${n.apiUrl||"https://api.zeit.co"}${e}`;delete n.apiUrl;if(n.teamId){const t=o.parse(e,true);const r=t.query;r.teamId=n.teamId;e=`${t.href}?${a.default.encode(r)}`;delete n.teamId}const u=n.userAgent||`now-client-v${f.pkgVersion}`;delete n.userAgent;n.headers=Object.assign({},n.headers,{authorization:`Bearer ${t}`,accept:"application/json","user-agent":u});r(`${n.method||"GET"} ${e}`);c=Date.now();const l=yield s.default(e,n);r(`DONE in ${Date.now()-c}ms: ${n.method||"GET"} ${e}`);y.release();return l}));const p=process.platform.includes("win");t.prepareFiles=((e,t)=>{const n=[...e.keys()].reduce((n,r)=>{const i=[...n];const o=e.get(r);for(const e of o.names){let n;if(t.isDirectory){n=t.path?e.substring(t.path.length+1):e}else{const t=e.split(c.sep);n=t[t.length-1]}i.push({file:p?n.replace(/\\/g,"/"):n,size:o.data.byteLength||o.data.length,mode:o.mode,sha:r})}return i},[]);return n});function createDebug(e){const t=e||process.env.NOW_CLIENT_DEBUG;if(t){return(...e)=>{process.stderr.write([`[now-client-debug] ${(new Date).toISOString()}`,...e].join(" ")+"\n")}}return()=>{}}t.createDebug=createDebug},571:function(e,t,n){e.exports=minimatch;minimatch.Minimatch=Minimatch;var r={sep:"/"};try{r=n(622)}catch(e){}var i=minimatch.GLOBSTAR=Minimatch.GLOBSTAR={};var o=n(306);var s={"!":{open:"(?:(?!(?:",close:"))[^/]*?)"},"?":{open:"(?:",close:")?"},"+":{open:"(?:",close:")+"},"*":{open:"(?:",close:")*"},"@":{open:"(?:",close:")"}};var c="[^/]";var a=c+"*?";var u="(?:(?!(?:\\/|^)(?:\\.{1,2})($|\\/)).)*?";var f="(?:(?!(?:\\/|^)\\.).)*?";var l=charSet("().*{}+?[]^$\\!");function charSet(e){return e.split("").reduce(function(e,t){e[t]=true;return e},{})}var d=/\/+/;minimatch.filter=filter;function filter(e,t){t=t||{};return function(n,r,i){return minimatch(n,e,t)}}function ext(e,t){e=e||{};t=t||{};var n={};Object.keys(t).forEach(function(e){n[e]=t[e]});Object.keys(e).forEach(function(t){n[t]=e[t]});return n}minimatch.defaults=function(e){if(!e||!Object.keys(e).length)return minimatch;var t=minimatch;var n=function minimatch(n,r,i){return t.minimatch(n,r,ext(e,i))};n.Minimatch=function Minimatch(n,r){return new t.Minimatch(n,ext(e,r))};return n};Minimatch.defaults=function(e){if(!e||!Object.keys(e).length)return Minimatch;return minimatch.defaults(e).Minimatch};function minimatch(e,t,n){if(typeof t!=="string"){throw new TypeError("glob pattern string required")}if(!n)n={};if(!n.nocomment&&t.charAt(0)==="#"){return false}if(t.trim()==="")return e==="";return new Minimatch(t,n).match(e)}function Minimatch(e,t){if(!(this instanceof Minimatch)){return new Minimatch(e,t)}if(typeof e!=="string"){throw new TypeError("glob pattern string required")}if(!t)t={};e=e.trim();if(r.sep!=="/"){e=e.split(r.sep).join("/")}this.options=t;this.set=[];this.pattern=e;this.regexp=null;this.negate=false;this.comment=false;this.empty=false;this.make()}Minimatch.prototype.debug=function(){};Minimatch.prototype.make=make;function make(){if(this._made)return;var e=this.pattern;var t=this.options;if(!t.nocomment&&e.charAt(0)==="#"){this.comment=true;return}if(!e){this.empty=true;return}this.parseNegate();var n=this.globSet=this.braceExpand();if(t.debug)this.debug=console.error;this.debug(this.pattern,n);n=this.globParts=n.map(function(e){return e.split(d)});this.debug(this.pattern,n);n=n.map(function(e,t,n){return e.map(this.parse,this)},this);this.debug(this.pattern,n);n=n.filter(function(e){return e.indexOf(false)===-1});this.debug(this.pattern,n);this.set=n}Minimatch.prototype.parseNegate=parseNegate;function parseNegate(){var e=this.pattern;var t=false;var n=this.options;var r=0;if(n.nonegate)return;for(var i=0,o=e.length;i<o&&e.charAt(i)==="!";i++){t=!t;r++}if(r)this.pattern=e.substr(r);this.negate=t}minimatch.braceExpand=function(e,t){return braceExpand(e,t)};Minimatch.prototype.braceExpand=braceExpand;function braceExpand(e,t){if(!t){if(this instanceof Minimatch){t=this.options}else{t={}}}e=typeof e==="undefined"?this.pattern:e;if(typeof e==="undefined"){throw new TypeError("undefined pattern")}if(t.nobrace||!e.match(/\{.*\}/)){return[e]}return o(e)}Minimatch.prototype.parse=parse;var y={};function parse(e,t){if(e.length>1024*64){throw new TypeError("pattern is too long")}var n=this.options;if(!n.noglobstar&&e==="**")return i;if(e==="")return"";var r="";var o=!!n.nocase;var u=false;var f=[];var d=[];var h;var p=false;var m=-1;var g=-1;var v=e.charAt(0)==="."?"":n.dot?"(?!(?:^|\\/)\\.{1,2}(?:$|\\/))":"(?!\\.)";var S=this;function clearStateChar(){if(h){switch(h){case"*":r+=a;o=true;break;case"?":r+=c;o=true;break;default:r+="\\"+h;break}S.debug("clearStateChar %j %j",h,r);h=false}}for(var w=0,b=e.length,E;w<b&&(E=e.charAt(w));w++){this.debug("%s\t%s %s %j",e,w,r,E);if(u&&l[E]){r+="\\"+E;u=false;continue}switch(E){case"/":return false;case"\\":clearStateChar();u=true;continue;case"?":case"*":case"+":case"@":case"!":this.debug("%s\t%s %s %j <-- stateChar",e,w,r,E);if(p){this.debug("  in class");if(E==="!"&&w===g+1)E="^";r+=E;continue}S.debug("call clearStateChar %j",h);clearStateChar();h=E;if(n.noext)clearStateChar();continue;case"(":if(p){r+="(";continue}if(!h){r+="\\(";continue}f.push({type:h,start:w-1,reStart:r.length,open:s[h].open,close:s[h].close});r+=h==="!"?"(?:(?!(?:":"(?:";this.debug("plType %j %j",h,r);h=false;continue;case")":if(p||!f.length){r+="\\)";continue}clearStateChar();o=true;var x=f.pop();r+=x.close;if(x.type==="!"){d.push(x)}x.reEnd=r.length;continue;case"|":if(p||!f.length||u){r+="\\|";u=false;continue}clearStateChar();r+="|";continue;case"[":clearStateChar();if(p){r+="\\"+E;continue}p=true;g=w;m=r.length;r+=E;continue;case"]":if(w===g+1||!p){r+="\\"+E;u=false;continue}if(p){var _=e.substring(g+1,w);try{RegExp("["+_+"]")}catch(e){var k=this.parse(_,y);r=r.substr(0,m)+"\\["+k[0]+"\\]";o=o||k[1];p=false;continue}}o=true;p=false;r+=E;continue;default:clearStateChar();if(u){u=false}else if(l[E]&&!(E==="^"&&p)){r+="\\"}r+=E}}if(p){_=e.substr(g+1);k=this.parse(_,y);r=r.substr(0,m)+"\\["+k[0];o=o||k[1]}for(x=f.pop();x;x=f.pop()){var O=r.slice(x.reStart+x.open.length);this.debug("setting tail",r,x);O=O.replace(/((?:\\{2}){0,64})(\\?)\|/g,function(e,t,n){if(!n){n="\\"}return t+t+n+"|"});this.debug("tail=%j\n   %s",O,O,x,r);var T=x.type==="*"?a:x.type==="?"?c:"\\"+x.type;o=true;r=r.slice(0,x.reStart)+T+"\\("+O}clearStateChar();if(u){r+="\\\\"}var j=false;switch(r.charAt(0)){case".":case"[":case"(":j=true}for(var P=d.length-1;P>-1;P--){var D=d[P];var F=r.slice(0,D.reStart);var R=r.slice(D.reStart,D.reEnd-8);var $=r.slice(D.reEnd-8,D.reEnd);var A=r.slice(D.reEnd);$+=A;var C=F.split("(").length-1;var N=A;for(w=0;w<C;w++){N=N.replace(/\)[+*?]?/,"")}A=N;var I="";if(A===""&&t!==y){I="$"}var M=F+R+A+I+$;r=M}if(r!==""&&o){r="(?=.)"+r}if(j){r=v+r}if(t===y){return[r,o]}if(!o){return globUnescape(e)}var B=n.nocase?"i":"";try{var L=new RegExp("^"+r+"$",B)}catch(e){return new RegExp("$.")}L._glob=e;L._src=r;return L}minimatch.makeRe=function(e,t){return new Minimatch(e,t||{}).makeRe()};Minimatch.prototype.makeRe=makeRe;function makeRe(){if(this.regexp||this.regexp===false)return this.regexp;var e=this.set;if(!e.length){this.regexp=false;return this.regexp}var t=this.options;var n=t.noglobstar?a:t.dot?u:f;var r=t.nocase?"i":"";var o=e.map(function(e){return e.map(function(e){return e===i?n:typeof e==="string"?regExpEscape(e):e._src}).join("\\/")}).join("|");o="^(?:"+o+")$";if(this.negate)o="^(?!"+o+").*$";try{this.regexp=new RegExp(o,r)}catch(e){this.regexp=false}return this.regexp}minimatch.match=function(e,t,n){n=n||{};var r=new Minimatch(t,n);e=e.filter(function(e){return r.match(e)});if(r.options.nonull&&!e.length){e.push(t)}return e};Minimatch.prototype.match=match;function match(e,t){this.debug("match",e,this.pattern);if(this.comment)return false;if(this.empty)return e==="";if(e==="/"&&t)return true;var n=this.options;if(r.sep!=="/"){e=e.split(r.sep).join("/")}e=e.split(d);this.debug(this.pattern,"split",e);var i=this.set;this.debug(this.pattern,"set",i);var o;var s;for(s=e.length-1;s>=0;s--){o=e[s];if(o)break}for(s=0;s<i.length;s++){var c=i[s];var a=e;if(n.matchBase&&c.length===1){a=[o]}var u=this.matchOne(a,c,t);if(u){if(n.flipNegate)return true;return!this.negate}}if(n.flipNegate)return false;return this.negate}Minimatch.prototype.matchOne=function(e,t,n){var r=this.options;this.debug("matchOne",{this:this,file:e,pattern:t});this.debug("matchOne",e.length,t.length);for(var o=0,s=0,c=e.length,a=t.length;o<c&&s<a;o++,s++){this.debug("matchOne loop");var u=t[s];var f=e[o];this.debug(t,u,f);if(u===false)return false;if(u===i){this.debug("GLOBSTAR",[t,u,f]);var l=o;var d=s+1;if(d===a){this.debug("** at the end");for(;o<c;o++){if(e[o]==="."||e[o]===".."||!r.dot&&e[o].charAt(0)===".")return false}return true}while(l<c){var y=e[l];this.debug("\nglobstar while",e,l,t,d,y);if(this.matchOne(e.slice(l),t.slice(d),n)){this.debug("globstar found match!",l,c,y);return true}else{if(y==="."||y===".."||!r.dot&&y.charAt(0)==="."){this.debug("dot detected!",e,l,t,d);break}this.debug("globstar swallow a segment, and continue");l++}}if(n){this.debug("\n>>> no match, partial?",e,l,t,d);if(l===c)return true}return false}var h;if(typeof u==="string"){if(r.nocase){h=f.toLowerCase()===u.toLowerCase()}else{h=f===u}this.debug("string match",u,f,h)}else{h=f.match(u);this.debug("pattern match",u,f,h)}if(!h)return false}if(o===c&&s===a){return true}else if(o===c){return n}else if(s===a){var p=o===c-1&&e[o]==="";return p}throw new Error("wtf?")};function globUnescape(e){return e.replace(/\\(.)/g,"$1")}function regExpEscape(e){return e.replace(/[-[\]{}()*+?.,\\^$|#\s]/g,"\\$&")}},577:function(e){"use strict";e.exports=function(e){if(typeof Buffer.allocUnsafe==="function"){try{return Buffer.allocUnsafe(e)}catch(t){return new Buffer(e)}}return new Buffer(e)}},595:function(e,t,n){"use strict";const r=n(747);const i=n(622);const o=n(727).mkdirs;const s=n(322).pathExists;const c=n(916).utimesMillis;const a=n(127);function copy(e,t,n,r){if(typeof n==="function"&&!r){r=n;n={}}else if(typeof n==="function"){n={filter:n}}r=r||function(){};n=n||{};n.clobber="clobber"in n?!!n.clobber:true;n.overwrite="overwrite"in n?!!n.overwrite:n.clobber;if(n.preserveTimestamps&&process.arch==="ia32"){console.warn(`fs-extra: Using the preserveTimestamps option in 32-bit node is not recommended;\n\n    see https://github.com/jprichardson/node-fs-extra/issues/269`)}a.checkPaths(e,t,"copy",(i,o)=>{if(i)return r(i);const{srcStat:s,destStat:c}=o;a.checkParentPaths(e,s,t,"copy",i=>{if(i)return r(i);if(n.filter)return handleFilter(checkParentDir,c,e,t,n,r);return checkParentDir(c,e,t,n,r)})})}function checkParentDir(e,t,n,r,c){const a=i.dirname(n);s(a,(i,s)=>{if(i)return c(i);if(s)return startCopy(e,t,n,r,c);o(a,i=>{if(i)return c(i);return startCopy(e,t,n,r,c)})})}function handleFilter(e,t,n,r,i,o){Promise.resolve(i.filter(n,r)).then(s=>{if(s)return e(t,n,r,i,o);return o()},e=>o(e))}function startCopy(e,t,n,r,i){if(r.filter)return handleFilter(getStats,e,t,n,r,i);return getStats(e,t,n,r,i)}function getStats(e,t,n,i,o){const s=i.dereference?r.stat:r.lstat;s(t,(r,s)=>{if(r)return o(r);if(s.isDirectory())return onDir(s,e,t,n,i,o);else if(s.isFile()||s.isCharacterDevice()||s.isBlockDevice())return onFile(s,e,t,n,i,o);else if(s.isSymbolicLink())return onLink(e,t,n,i,o)})}function onFile(e,t,n,r,i,o){if(!t)return copyFile(e,n,r,i,o);return mayCopyFile(e,n,r,i,o)}function mayCopyFile(e,t,n,i,o){if(i.overwrite){r.unlink(n,r=>{if(r)return o(r);return copyFile(e,t,n,i,o)})}else if(i.errorOnExist){return o(new Error(`'${n}' already exists`))}else return o()}function copyFile(e,t,n,i,o){if(typeof r.copyFile==="function"){return r.copyFile(t,n,t=>{if(t)return o(t);return setDestModeAndTimestamps(e,n,i,o)})}return copyFileFallback(e,t,n,i,o)}function copyFileFallback(e,t,n,i,o){const s=r.createReadStream(t);s.on("error",e=>o(e)).once("open",()=>{const t=r.createWriteStream(n,{mode:e.mode});t.on("error",e=>o(e)).on("open",()=>s.pipe(t)).once("close",()=>setDestModeAndTimestamps(e,n,i,o))})}function setDestModeAndTimestamps(e,t,n,i){r.chmod(t,e.mode,r=>{if(r)return i(r);if(n.preserveTimestamps){return c(t,e.atime,e.mtime,i)}return i()})}function onDir(e,t,n,r,i,o){if(!t)return mkDirAndCopy(e,n,r,i,o);if(t&&!t.isDirectory()){return o(new Error(`Cannot overwrite non-directory '${r}' with directory '${n}'.`))}return copyDir(n,r,i,o)}function mkDirAndCopy(e,t,n,i,o){r.mkdir(n,s=>{if(s)return o(s);copyDir(t,n,i,t=>{if(t)return o(t);return r.chmod(n,e.mode,o)})})}function copyDir(e,t,n,i){r.readdir(e,(r,o)=>{if(r)return i(r);return copyDirItems(o,e,t,n,i)})}function copyDirItems(e,t,n,r,i){const o=e.pop();if(!o)return i();return copyDirItem(e,o,t,n,r,i)}function copyDirItem(e,t,n,r,o,s){const c=i.join(n,t);const u=i.join(r,t);a.checkPaths(c,u,"copy",(t,i)=>{if(t)return s(t);const{destStat:a}=i;startCopy(a,c,u,o,t=>{if(t)return s(t);return copyDirItems(e,n,r,o,s)})})}function onLink(e,t,n,o,s){r.readlink(t,(t,c)=>{if(t)return s(t);if(o.dereference){c=i.resolve(process.cwd(),c)}if(!e){return r.symlink(c,n,s)}else{r.readlink(n,(t,u)=>{if(t){if(t.code==="EINVAL"||t.code==="UNKNOWN")return r.symlink(c,n,s);return s(t)}if(o.dereference){u=i.resolve(process.cwd(),u)}if(a.isSrcSubdir(c,u)){return s(new Error(`Cannot copy '${c}' to a subdirectory of itself, '${u}'.`))}if(e.isDirectory()&&a.isSrcSubdir(u,c)){return s(new Error(`Cannot overwrite '${u}' with '${c}'.`))}return copyLink(c,n,s)})}})}function copyLink(e,t,n){r.unlink(t,i=>{if(i)return n(i);return r.symlink(e,t,n)})}e.exports=copy},598:function(e,t,n){var r=n(747);var i=n(250);var o=n(93);var s=n(608);var c=n(669);var a;var u;if(typeof Symbol==="function"&&typeof Symbol.for==="function"){a=Symbol.for("graceful-fs.queue");u=Symbol.for("graceful-fs.previous")}else{a="___graceful-fs.queue";u="___graceful-fs.previous"}function noop(){}var f=noop;if(c.debuglog)f=c.debuglog("gfs4");else if(/\bgfs4\b/i.test(process.env.NODE_DEBUG||""))f=function(){var e=c.format.apply(c,arguments);e="GFS4: "+e.split(/\n/).join("\nGFS4: ");console.error(e)};if(!global[a]){var l=[];Object.defineProperty(global,a,{get:function(){return l}});r.close=function(e){function close(t,n){return e.call(r,t,function(e){if(!e){retry()}if(typeof n==="function")n.apply(this,arguments)})}Object.defineProperty(close,u,{value:e});return close}(r.close);r.closeSync=function(e){function closeSync(t){e.apply(r,arguments);retry()}Object.defineProperty(closeSync,u,{value:e});return closeSync}(r.closeSync);if(/\bgfs4\b/i.test(process.env.NODE_DEBUG||"")){process.on("exit",function(){f(global[a]);n(357).equal(global[a].length,0)})}}e.exports=patch(s(r));if(process.env.TEST_GRACEFUL_FS_GLOBAL_PATCH&&!r.__patched){e.exports=patch(r);r.__patched=true}function patch(e){i(e);e.gracefulify=patch;e.createReadStream=createReadStream;e.createWriteStream=createWriteStream;var t=e.readFile;e.readFile=readFile;function readFile(e,n,r){if(typeof n==="function")r=n,n=null;return go$readFile(e,n,r);function go$readFile(e,n,r){return t(e,n,function(t){if(t&&(t.code==="EMFILE"||t.code==="ENFILE"))enqueue([go$readFile,[e,n,r]]);else{if(typeof r==="function")r.apply(this,arguments);retry()}})}}var n=e.writeFile;e.writeFile=writeFile;function writeFile(e,t,r,i){if(typeof r==="function")i=r,r=null;return go$writeFile(e,t,r,i);function go$writeFile(e,t,r,i){return n(e,t,r,function(n){if(n&&(n.code==="EMFILE"||n.code==="ENFILE"))enqueue([go$writeFile,[e,t,r,i]]);else{if(typeof i==="function")i.apply(this,arguments);retry()}})}}var r=e.appendFile;if(r)e.appendFile=appendFile;function appendFile(e,t,n,i){if(typeof n==="function")i=n,n=null;return go$appendFile(e,t,n,i);function go$appendFile(e,t,n,i){return r(e,t,n,function(r){if(r&&(r.code==="EMFILE"||r.code==="ENFILE"))enqueue([go$appendFile,[e,t,n,i]]);else{if(typeof i==="function")i.apply(this,arguments);retry()}})}}var s=e.readdir;e.readdir=readdir;function readdir(e,t,n){var r=[e];if(typeof t!=="function"){r.push(t)}else{n=t}r.push(go$readdir$cb);return go$readdir(r);function go$readdir$cb(e,t){if(t&&t.sort)t.sort();if(e&&(e.code==="EMFILE"||e.code==="ENFILE"))enqueue([go$readdir,[r]]);else{if(typeof n==="function")n.apply(this,arguments);retry()}}}function go$readdir(t){return s.apply(e,t)}if(process.version.substr(0,4)==="v0.8"){var c=o(e);ReadStream=c.ReadStream;WriteStream=c.WriteStream}var a=e.ReadStream;if(a){ReadStream.prototype=Object.create(a.prototype);ReadStream.prototype.open=ReadStream$open}var u=e.WriteStream;if(u){WriteStream.prototype=Object.create(u.prototype);WriteStream.prototype.open=WriteStream$open}Object.defineProperty(e,"ReadStream",{get:function(){return ReadStream},set:function(e){ReadStream=e},enumerable:true,configurable:true});Object.defineProperty(e,"WriteStream",{get:function(){return WriteStream},set:function(e){WriteStream=e},enumerable:true,configurable:true});var f=ReadStream;Object.defineProperty(e,"FileReadStream",{get:function(){return f},set:function(e){f=e},enumerable:true,configurable:true});var l=WriteStream;Object.defineProperty(e,"FileWriteStream",{get:function(){return l},set:function(e){l=e},enumerable:true,configurable:true});function ReadStream(e,t){if(this instanceof ReadStream)return a.apply(this,arguments),this;else return ReadStream.apply(Object.create(ReadStream.prototype),arguments)}function ReadStream$open(){var e=this;open(e.path,e.flags,e.mode,function(t,n){if(t){if(e.autoClose)e.destroy();e.emit("error",t)}else{e.fd=n;e.emit("open",n);e.read()}})}function WriteStream(e,t){if(this instanceof WriteStream)return u.apply(this,arguments),this;else return WriteStream.apply(Object.create(WriteStream.prototype),arguments)}function WriteStream$open(){var e=this;open(e.path,e.flags,e.mode,function(t,n){if(t){e.destroy();e.emit("error",t)}else{e.fd=n;e.emit("open",n)}})}function createReadStream(t,n){return new e.ReadStream(t,n)}function createWriteStream(t,n){return new e.WriteStream(t,n)}var d=e.open;e.open=open;function open(e,t,n,r){if(typeof n==="function")r=n,n=null;return go$open(e,t,n,r);function go$open(e,t,n,r){return d(e,t,n,function(i,o){if(i&&(i.code==="EMFILE"||i.code==="ENFILE"))enqueue([go$open,[e,t,n,r]]);else{if(typeof r==="function")r.apply(this,arguments);retry()}})}}return e}function enqueue(e){f("ENQUEUE",e[0].name,e[1]);global[a].push(e)}function retry(){var e=global[a].shift();if(e){f("RETRY",e[0].name,e[1]);e[0].apply(null,e[1])}}},600:function(e,t,n){var r=n(988);t.operation=function(e){var n=t.timeouts(e);return new r(n,{forever:e&&e.forever,unref:e&&e.unref,maxRetryTime:e&&e.maxRetryTime})};t.timeouts=function(e){if(e instanceof Array){return[].concat(e)}var t={retries:10,factor:2,minTimeout:1*1e3,maxTimeout:Infinity,randomize:false};for(var n in e){t[n]=e[n]}if(t.minTimeout>t.maxTimeout){throw new Error("minTimeout is greater than maxTimeout")}var r=[];for(var i=0;i<t.retries;i++){r.push(this.createTimeout(i,t))}if(e&&e.forever&&!r.length){r.push(this.createTimeout(i,t))}r.sort(function(e,t){return e-t});return r};t.createTimeout=function(e,t){var n=t.randomize?Math.random()+1:1;var r=Math.round(n*t.minTimeout*Math.pow(t.factor,e));r=Math.min(r,t.maxTimeout);return r};t.wrap=function(e,n,r){if(n instanceof Array){r=n;n=null}if(!r){r=[];for(var i in e){if(typeof e[i]==="function"){r.push(i)}}}for(var o=0;o<r.length;o++){var s=r[o];var c=e[s];e[s]=function retryWrapper(r){var i=t.operation(n);var o=Array.prototype.slice.call(arguments,1);var s=o.pop();o.push(function(e){if(i.retry(e)){return}if(e){arguments[0]=i.mainError()}s.apply(this,arguments)});i.attempt(function(){r.apply(e,o)})}.bind(e,c);e[s].options=n}}},605:function(e){e.exports=require("http")},608:function(e){"use strict";e.exports=clone;function clone(e){if(e===null||typeof e!=="object")return e;if(e instanceof Object)var t={__proto__:e.__proto__};else var t=Object.create(null);Object.getOwnPropertyNames(e).forEach(function(n){Object.defineProperty(t,n,Object.getOwnPropertyDescriptor(e,n))});return t}},614:function(e){e.exports=require("events")},615:function(e,t,n){"use strict";const r=n(676).fromCallback;const i=n(747);const o=n(622);const s=n(727);const c=n(723);const a=r(function emptyDir(e,t){t=t||function(){};i.readdir(e,(n,r)=>{if(n)return s.mkdirs(e,t);r=r.map(t=>o.join(e,t));deleteItem();function deleteItem(){const e=r.pop();if(!e)return t();c.remove(e,e=>{if(e)return t(e);deleteItem()})}})});function emptyDirSync(e){let t;try{t=i.readdirSync(e)}catch(t){return s.mkdirsSync(e)}t.forEach(t=>{t=o.join(e,t);c.removeSync(t)})}e.exports={emptyDirSync:emptyDirSync,emptydirSync:emptyDirSync,emptyDir:a,emptydir:a}},619:function(e){e.exports=require("constants")},621:function(e){"use strict";e.exports=balanced;function balanced(e,t,n){if(e instanceof RegExp)e=maybeMatch(e,n);if(t instanceof RegExp)t=maybeMatch(t,n);var r=range(e,t,n);return r&&{start:r[0],end:r[1],pre:n.slice(0,r[0]),body:n.slice(r[0]+e.length,r[1]),post:n.slice(r[1]+t.length)}}function maybeMatch(e,t){var n=t.match(e);return n?n[0]:null}balanced.range=range;function range(e,t,n){var r,i,o,s,c;var a=n.indexOf(e);var u=n.indexOf(t,a+1);var f=a;if(a>=0&&u>0){r=[];o=n.length;while(f>=0&&!c){if(f==a){r.push(f);a=n.indexOf(e,f+1)}else if(r.length==1){c=[r.pop(),u]}else{i=r.pop();if(i<o){o=i;s=u}u=n.indexOf(t,f+1)}f=a<u&&a>=0?a:u}if(r.length){c=[o,s]}}return c}},622:function(e){e.exports=require("path")},628:function(e,t,n){"use strict";const r=n(598);const i=n(622);const o=n(727);const s=n(469);function outputJsonSync(e,t,n){const c=i.dirname(e);if(!r.existsSync(c)){o.mkdirsSync(c)}s.writeJsonSync(e,t,n)}e.exports=outputJsonSync},654:function(e,t,n){"use strict";var r=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:true});const i=r(n(614));function arrayMove(e,t,n,r,i){for(let o=0;o<i;++o){n[o+r]=e[o+t];e[o+t]=void 0}}function pow2AtLeast(e){e=e>>>0;e=e-1;e=e|e>>1;e=e|e>>2;e=e|e>>4;e=e|e>>8;e=e|e>>16;return e+1}function getCapacity(e){return pow2AtLeast(Math.min(Math.max(16,e),1073741824))}class Deque{constructor(e){this._capacity=getCapacity(e);this._length=0;this._front=0;this.arr=[]}push(e){const t=this._length;this.checkCapacity(t+1);const n=this._front+t&this._capacity-1;this.arr[n]=e;this._length=t+1;return t+1}pop(){const e=this._length;if(e===0){return void 0}const t=this._front+e-1&this._capacity-1;const n=this.arr[t];this.arr[t]=void 0;this._length=e-1;return n}shift(){const e=this._length;if(e===0){return void 0}const t=this._front;const n=this.arr[t];this.arr[t]=void 0;this._front=t+1&this._capacity-1;this._length=e-1;return n}get length(){return this._length}checkCapacity(e){if(this._capacity<e){this.resizeTo(getCapacity(this._capacity*1.5+16))}}resizeTo(e){const t=this._capacity;this._capacity=e;const n=this._front;const r=this._length;if(n+r>t){const e=n+r&t-1;arrayMove(this.arr,0,this.arr,t,e)}}}class ReleaseEmitter extends i.default{}function isFn(e){return typeof e==="function"}function defaultInit(){return"1"}class Sema{constructor(e,{initFn:t=defaultInit,pauseFn:n,resumeFn:r,capacity:i=10}={}){if(isFn(n)!==isFn(r)){throw new Error("pauseFn and resumeFn must be both set for pausing")}this.nrTokens=e;this.free=new Deque(e);this.waiting=new Deque(i);this.releaseEmitter=new ReleaseEmitter;this.noTokens=t===defaultInit;this.pauseFn=n;this.resumeFn=r;this.paused=false;this.releaseEmitter.on("release",e=>{const t=this.waiting.shift();if(t){t.resolve(e)}else{if(this.resumeFn&&this.paused){this.paused=false;this.resumeFn()}this.free.push(e)}});for(let n=0;n<e;n++){this.free.push(t())}}async acquire(){let e=this.free.pop();if(e!==void 0){return e}return new Promise((e,t)=>{if(this.pauseFn&&!this.paused){this.paused=true;this.pauseFn()}this.waiting.push({resolve:e,reject:t})})}release(e){this.releaseEmitter.emit("release",this.noTokens?"1":e)}drain(){const e=new Array(this.nrTokens);for(let t=0;t<this.nrTokens;t++){e[t]=this.acquire()}return Promise.all(e)}nrWaiting(){return this.waiting.length}}t.Sema=Sema;function RateLimit(e,{timeUnit:t=1e3,uniformDistribution:n=false}={}){const r=new Sema(n?1:e);const i=n?t/e:t;return async function rl(){await r.acquire();setTimeout(()=>r.release(),i)}}t.RateLimit=RateLimit},665:function(e,t,n){"use strict";n.r(t);var r=n(477);var i=undefined&&undefined.__awaiter||function(e,t,n,r){return new(n||(n=Promise))(function(i,o){function fulfilled(e){try{step(r.next(e))}catch(e){o(e)}}function rejected(e){try{step(r["throw"](e))}catch(e){o(e)}}function step(e){e.done?i(e.value):new n(function(t){t(e.value)}).then(fulfilled,rejected)}step((r=r.apply(e,t||[])).next())})};var o=undefined&&undefined.__asyncValues||function(e){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var t=e[Symbol.asyncIterator],n;return t?t.call(e):(e=typeof __values==="function"?__values(e):e[Symbol.iterator](),n={},verb("next"),verb("throw"),verb("return"),n[Symbol.asyncIterator]=function(){return this},n);function verb(t){n[t]=e[t]&&function(n){return new Promise(function(r,i){n=e[t](n),settle(r,i,n.done,n.value)})}}function settle(e,t,n,r){Promise.resolve(r).then(function(t){e({value:t,done:n})},t)}};var s=function(e,t){return i(this,void 0,void 0,function*(){var n,i;const s=Object(r.createDeployment)({token:e,path:t},{});try{for(var c=o(s),a;a=yield c.next(),!a.done;){const e=a.value;if(e.type==="ready")return e.payload}}catch(e){n={error:e}}finally{try{if(a&&!a.done&&(i=c.return))yield i.call(c)}finally{if(n)throw n.error}}})};var c=n(470);var a=n(129);var u=undefined&&undefined.__awaiter||function(e,t,n,r){return new(n||(n=Promise))(function(i,o){function fulfilled(e){try{step(r.next(e))}catch(e){o(e)}}function rejected(e){try{step(r["throw"](e))}catch(e){o(e)}}function step(e){e.done?i(e.value):new n(function(t){t(e.value)}).then(fulfilled,rejected)}step((r=r.apply(e,t||[])).next())})};(function(){return u(this,void 0,void 0,function*(){const e=Object(c.getInput)("now_token");const t="./vendor/bin/phpunit";const n=["--coverage-html=/tmp/report-yiogtedwrb"];const r={cwd:process.env.GITHUB_WORKSPACE,encoding:"utf8"};const i=Object(a.spawnSync)(t,n,r);console.log(i.stdout);s(e,"/tmp/report-yiogtedwrb")})})()},666:function(e,t,n){var r;try{r=n(598)}catch(e){r=n(747)}function readFile(e,t,n){if(n==null){n=t;t={}}if(typeof t==="string"){t={encoding:t}}t=t||{};var i=t.fs||r;var o=true;if("throws"in t){o=t.throws}i.readFile(e,t,function(r,i){if(r)return n(r);i=stripBom(i);var s;try{s=JSON.parse(i,t?t.reviver:null)}catch(t){if(o){t.message=e+": "+t.message;return n(t)}else{return n(null,null)}}n(null,s)})}function readFileSync(e,t){t=t||{};if(typeof t==="string"){t={encoding:t}}var n=t.fs||r;var i=true;if("throws"in t){i=t.throws}try{var o=n.readFileSync(e,t);o=stripBom(o);return JSON.parse(o,t.reviver)}catch(t){if(i){t.message=e+": "+t.message;throw t}else{return null}}}function stringify(e,t){var n;var r="\n";if(typeof t==="object"&&t!==null){if(t.spaces){n=t.spaces}if(t.EOL){r=t.EOL}}var i=JSON.stringify(e,t?t.replacer:null,n);return i.replace(/\n/g,r)+r}function writeFile(e,t,n,i){if(i==null){i=n;n={}}n=n||{};var o=n.fs||r;var s="";try{s=stringify(t,n)}catch(e){if(i)i(e,null);return}o.writeFile(e,s,n,i)}function writeFileSync(e,t,n){n=n||{};var i=n.fs||r;var o=stringify(t,n);return i.writeFileSync(e,o,n)}function stripBom(e){if(Buffer.isBuffer(e))e=e.toString("utf8");e=e.replace(/^\uFEFF/,"");return e}var i={readFile:readFile,readFileSync:readFileSync,writeFile:writeFile,writeFileSync:writeFileSync};e.exports=i},669:function(e){e.exports=require("util")},676:function(e,t){"use strict";t.fromCallback=function(e){return Object.defineProperty(function(){if(typeof arguments[arguments.length-1]==="function")e.apply(this,arguments);else{return new Promise((t,n)=>{arguments[arguments.length]=((e,r)=>{if(e)return n(e);t(r)});arguments.length++;e.apply(this,arguments)})}},"name",{value:e.name})};t.fromPromise=function(e){return Object.defineProperty(function(){const t=arguments[arguments.length-1];if(typeof t!=="function")return e.apply(this,arguments);else e.apply(this,arguments).then(e=>t(null,e),t)},"name",{value:e.name})}},695:function(e,t,n){"use strict";const r=n(622);const i=n(727);const o=n(322).pathExists;const s=n(469);function outputJson(e,t,n,c){if(typeof n==="function"){c=n;n={}}const a=r.dirname(e);o(a,(r,o)=>{if(r)return c(r);if(o)return s.writeJson(e,t,n,c);i.mkdirs(a,r=>{if(r)return c(r);s.writeJson(e,t,n,c)})})}e.exports=outputJson},723:function(e,t,n){"use strict";const r=n(676).fromCallback;const i=n(474);e.exports={remove:r(i),removeSync:i.sync}},727:function(e,t,n){"use strict";const r=n(676).fromCallback;const i=r(n(289));const o=n(307);e.exports={mkdirs:i,mkdirsSync:o,mkdirp:i,mkdirpSync:o,ensureDir:i,ensureDirSync:o}},741:function(e,t,n){"use strict";var r=this&&this.__await||function(e){return this instanceof r?(this.v=e,this):new r(e)};var i=this&&this.__asyncValues||function(e){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var t=e[Symbol.asyncIterator],n;return t?t.call(e):(e=typeof __values==="function"?__values(e):e[Symbol.iterator](),n={},verb("next"),verb("throw"),verb("return"),n[Symbol.asyncIterator]=function(){return this},n);function verb(t){n[t]=e[t]&&function(n){return new Promise(function(r,i){n=e[t](n),settle(r,i,n.done,n.value)})}}function settle(e,t,n,r){Promise.resolve(r).then(function(t){e({value:t,done:n})},t)}};var o=this&&this.__asyncGenerator||function(e,t,n){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var i=n.apply(e,t||[]),o,s=[];return o={},verb("next"),verb("throw"),verb("return"),o[Symbol.asyncIterator]=function(){return this},o;function verb(e){if(i[e])o[e]=function(t){return new Promise(function(n,r){s.push([e,t,n,r])>1||resume(e,t)})}}function resume(e,t){try{step(i[e](t))}catch(e){settle(s[0][3],e)}}function step(e){e.value instanceof r?Promise.resolve(e.value.v).then(fulfill,reject):settle(s[0][2],e)}function fulfill(e){resume("next",e)}function reject(e){resume("throw",e)}function settle(e,t){if(e(t),s.shift(),s.length)resume(s[0][0],s[0][1])}};var s=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};var c=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(e!=null)for(var n in e)if(Object.hasOwnProperty.call(e,n))t[n]=e[n];t["default"]=e;return t};Object.defineProperty(t,"__esModule",{value:true});const a=n(226);const u=s(n(50));const f=n(622);const l=c(n(412));const d=n(309);const y=n(528);const h=n(298);var p=n(528);t.EVENTS=p.EVENTS;function buildCreateDeployment(e){return function createDeployment(t,n,s={}){return o(this,arguments,function*createDeployment_1(){var o,c;const{path:p}=t;const m=y.createDebug(t.debug);const g=process.cwd();m("Creating deployment...");if(typeof p!=="string"&&!Array.isArray(p)){m(`Error: 'path' is expected to be a string or an array. Received ${typeof p}`);throw new h.DeploymentError({code:"missing_path",message:"Path not provided"})}if(typeof t.token!=="string"){m(`Error: 'token' is expected to be a string. Received ${typeof t.token}`);throw new h.DeploymentError({code:"token_not_provided",message:"Options object must include a `token`"})}t.isDirectory=!Array.isArray(p)&&a.lstatSync(p).isDirectory();let v;if(Array.isArray(p)){for(const e of p){if(!f.isAbsolute(e)){throw new h.DeploymentError({code:"invalid_path",message:`Provided path ${e} is not absolute`})}}}else if(!f.isAbsolute(p)){throw new h.DeploymentError({code:"invalid_path",message:`Provided path ${p} is not absolute`})}if(t.isDirectory&&!Array.isArray(p)){m(`Provided 'path' is a directory. Reading subpaths... `);v=yield r(a.readdir(p));m(`Read ${v.length} subpaths`)}else if(Array.isArray(p)){m(`Provided 'path' is an array of file paths`);v=p}else{m(`Provided 'path' is a single file`);v=[p]}let{ig:S,ignores:w}=yield r(y.getNowIgnore(p));m(`Found ${S.ignores.length} rules in .nowignore`);let b;m("Building file tree...");if(t.isDirectory&&!Array.isArray(p)){const e=yield r(u.default(p,w));const t=e.map(e=>f.relative(process.cwd(),e));b=S.filter(t).map(e=>f.join(process.cwd(),e));m(`Read ${b.length} files in the specified directory`)}else if(Array.isArray(p)){b=p;m(`Assigned ${b.length} files provided explicitly`)}else{b=[p];m(`Deploying the provided path as single file`)}if(!s){const e="now.json";const t=b.find(t=>f.relative(g,t)===e);m(t?`Found ${e}`:`Missing ${e}`);s=yield r(y.parseNowJSON(t))}if(e===1&&s&&Array.isArray(s.files)&&s.files.length>0){m("Filtering file list based on `files` key in now.json");const e=new Set(["Dockerfile"]);const t=new Set;s.files.forEach(n=>{if(a.lstatSync(n).isDirectory()){t.add(n)}else{e.add(n)}});b=b.filter(n=>{const r=f.relative(g,n);if(e.has(r)){return true}for(let e of t){if(r.startsWith(e+"/")){return true}}return false});m(`Found ${b.length} files: ${JSON.stringify(b)}`)}if(b.length===0||b.every(e=>e?e.split("/").pop().startsWith("."):true)){m(`Deployment path has no files (or only dotfiles). Yielding a warning event`);yield yield r({type:"warning",payload:"There are no files (or only files starting with a dot) inside your deployment."})}const E=yield r(l.default(b));m(`Yielding a 'hashes-calculated' event with ${E.size} hashes`);yield yield r({type:"hashes-calculated",payload:l.mapToObject(E)});if(t.apiUrl){m(`Using provided API URL: ${t.apiUrl}`)}if(t.userAgent){m(`Using provided user agent: ${t.userAgent}`)}m(`Setting platform version to ${e}`);n.version=e;m(`Creating the deployment and starting upload...`);try{for(var x=i(d.upload(E,s,t,n)),_;_=yield r(x.next()),!_.done;){const e=_.value;m(`Yielding a '${e.type}' event`);yield yield r(e)}}catch(e){o={error:e}}finally{try{if(_&&!_.done&&(c=x.return))yield r(c.call(x))}finally{if(o)throw o.error}}})}}t.default=buildCreateDeployment},747:function(e){e.exports=require("fs")},761:function(e){e.exports=require("zlib")},766:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:true});const r=n(835);function generateQueryString(e){const t=new r.URLSearchParams;if(e.teamId){t.set("teamId",e.teamId)}if(e.force){t.set("forceNew","1")}return Array.from(t.entries()).length?`?${t.toString()}`:""}t.generateQueryString=generateQueryString},767:function(e,t,n){"use strict";var r=this&&this.__await||function(e){return this instanceof r?(this.v=e,this):new r(e)};var i=this&&this.__asyncGenerator||function(e,t,n){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var i=n.apply(e,t||[]),o,s=[];return o={},verb("next"),verb("throw"),verb("return"),o[Symbol.asyncIterator]=function(){return this},o;function verb(e){if(i[e])o[e]=function(t){return new Promise(function(n,r){s.push([e,t,n,r])>1||resume(e,t)})}}function resume(e,t){try{step(i[e](t))}catch(e){settle(s[0][3],e)}}function step(e){e.value instanceof r?Promise.resolve(e.value.v).then(fulfill,reject):settle(s[0][2],e)}function fulfill(e){resume("next",e)}function reject(e){resume("throw",e)}function settle(e,t){if(e(t),s.shift(),s.length)resume(s[0][0],s[0][1])}};var o=this&&this.__asyncValues||function(e){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var t=e[Symbol.asyncIterator],n;return t?t.call(e):(e=typeof __values==="function"?__values(e):e[Symbol.iterator](),n={},verb("next"),verb("throw"),verb("return"),n[Symbol.asyncIterator]=function(){return this},n);function verb(t){n[t]=e[t]&&function(n){return new Promise(function(r,i){n=e[t](n),settle(r,i,n.done,n.value)})}}function settle(e,t,n,r){Promise.resolve(r).then(function(t){e({value:t,done:n})},t)}};Object.defineProperty(t,"__esModule",{value:true});const s=n(528);const c=n(317);const a=n(766);const u=n(450);function createDeployment(e,t,n){return i(this,arguments,function*createDeployment_1(){const i=s.createDebug(t.debug);const o=s.prepareFiles(e,t);const c=s.getApiDeploymentsUrl(n);i("Sending deployment creation API request");try{const e=yield r(s.fetch(`${c}${a.generateQueryString(t)}`,t.token,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(Object.assign({},n,{files:o})),apiUrl:t.apiUrl,userAgent:t.userAgent}));const u=yield r(e.json());i("Deployment response:",JSON.stringify(u));if(!e.ok||u.error){i("Error: Deployment request status is",e.status);return yield r(yield yield r({type:"error",payload:u.error?Object.assign({},u.error,{status:e.status}):Object.assign({},u,{status:e.status})}))}for(const[t,n]of e.headers.entries()){if(t.startsWith("x-now-warning-")){i("Deployment created with a warning:",n);yield yield r({type:"warning",payload:n})}if(t.startsWith("x-now-notice-")){i("Deployment created with a notice:",n);yield yield r({type:"notice",payload:n})}}yield yield r({type:"created",payload:u})}catch(e){return yield r(yield yield r({type:"error",payload:e}))}})}function getDefaultName(e,t){const n=s.createDebug(t.debug);const{isDirectory:r,path:i}=t;if(r&&typeof i==="string"){n("Provided path is a directory. Using last segment as default name");return i.split("/").pop()}else{n("Provided path is not a directory. Using last segment of the first file as default name");const t=Array.from(e.values())[0].names[0];return t.split("/").pop()}}function deploy(e,t,n,a){return i(this,arguments,function*deploy_1(){var i,f,l,d;const y=s.createDebug(n.debug);if(!a.version&&!a.name){a.version=2;a.name=e.size===1?"file":getDefaultName(e,n);if(a.name==="file"){y('Setting deployment name to "file" for single-file deployment')}}if(e.size===1&&a.builds===undefined&&a.routes===undefined&&a.cleanUrls===undefined&&a.rewrites===undefined&&a.redirects===undefined&&a.headers===undefined&&a.trailingSlash===undefined){y(`Assigning '/' route for single file deployment`);const t=Array.from(e.values())[0].names[0];a.routes=[{src:"/",dest:`/${t.split("/").pop()}`}]}if(!a.name){a.name=n.defaultName||getDefaultName(e,n);y("No name provided. Defaulting to",a.name)}if(a.version===1&&!a.deploymentType&&t.type){y(`Setting 'type' for 1.0 deployment to '${t.type}'`);a.deploymentType=t.type.toUpperCase()}if(a.version===1&&!a.config){y(`Writing 'config' values for 1.0 deployment`);a.config=Object.assign({},t);delete a.config.version}if(a.version===1&&!a.forceNew&&n.force){y(`Setting 'forceNew' for 1.0 deployment`);a.forceNew=n.force}let h;try{y("Creating deployment");try{for(var p=o(createDeployment(e,n,a)),m;m=yield r(p.next()),!m.done;){const e=m.value;if(e.type==="created"){y("Deployment created");h=e.payload}yield yield r(e)}}catch(e){i={error:e}}finally{try{if(m&&!m.done&&(f=p.return))yield r(f.call(p))}finally{if(i)throw i.error}}}catch(e){y("An unexpected error occurred when creating the deployment");return yield r(yield yield r({type:"error",payload:e}))}if(h){if(u.isReady(h)&&u.isAliasAssigned(h)){y("Deployment state changed to READY 3");yield yield r({type:"ready",payload:h});y("Deployment alias assigned");return yield r(yield yield r({type:"alias-assigned",payload:h}))}try{y("Waiting for deployment to be ready...");try{for(var g=o(c.checkDeploymentStatus(h,n)),v;v=yield r(g.next()),!v.done;){const e=v.value;yield yield r(e)}}catch(e){l={error:e}}finally{try{if(v&&!v.done&&(d=g.return))yield r(d.call(g))}finally{if(l)throw l.error}}}catch(e){y("An unexpected error occurred while waiting for deployment to be ready");return yield r(yield yield r({type:"error",payload:e}))}}})}t.deploy=deploy},774:function(e,t,n){"use strict";const r=n(676).fromCallback;e.exports={copy:r(n(595))}},781:function(e,t,n){"use strict";const r=n(622);function getRootPath(e){e=r.normalize(r.resolve(e)).split(r.sep);if(e.length>0)return e[0];return null}const i=/[<>:"|?*]/;function invalidWin32Path(e){const t=getRootPath(e);e=e.replace(t,"");return i.test(e)}e.exports={getRootPath:getRootPath,invalidWin32Path:invalidWin32Path}},835:function(e){e.exports=require("url")},849:function(e,t,n){"use strict";const r=n(676).fromCallback;const i=n(622);const o=n(598);const s=n(727);const c=s.mkdirs;const a=s.mkdirsSync;const u=n(930);const f=u.symlinkPaths;const l=u.symlinkPathsSync;const d=n(975);const y=d.symlinkType;const h=d.symlinkTypeSync;const p=n(322).pathExists;function createSymlink(e,t,n,r){r=typeof n==="function"?n:r;n=typeof n==="function"?false:n;p(t,(s,a)=>{if(s)return r(s);if(a)return r(null);f(e,t,(s,a)=>{if(s)return r(s);e=a.toDst;y(a.toCwd,n,(n,s)=>{if(n)return r(n);const a=i.dirname(t);p(a,(n,i)=>{if(n)return r(n);if(i)return o.symlink(e,t,s,r);c(a,n=>{if(n)return r(n);o.symlink(e,t,s,r)})})})})})}function createSymlinkSync(e,t,n){const r=o.existsSync(t);if(r)return undefined;const s=l(e,t);e=s.toDst;n=h(s.toCwd,n);const c=i.dirname(t);const u=o.existsSync(c);if(u)return o.symlinkSync(e,t,n);a(c);return o.symlinkSync(e,t,n)}e.exports={createSymlink:r(createSymlink),createSymlinkSync:createSymlinkSync}},869:function(e,t,n){"use strict";const r=n(676).fromCallback;const i=n(598);const o=["access","appendFile","chmod","chown","close","copyFile","fchmod","fchown","fdatasync","fstat","fsync","ftruncate","futimes","lchown","lchmod","link","lstat","mkdir","mkdtemp","open","readFile","readdir","readlink","realpath","rename","rmdir","stat","symlink","truncate","unlink","utimes","writeFile"].filter(e=>{return typeof i[e]==="function"});Object.keys(i).forEach(e=>{if(e==="promises"){return}t[e]=i[e]});o.forEach(e=>{t[e]=r(i[e])});t.exists=function(e,t){if(typeof t==="function"){return i.exists(e,t)}return new Promise(t=>{return i.exists(e,t)})};t.read=function(e,t,n,r,o,s){if(typeof s==="function"){return i.read(e,t,n,r,o,s)}return new Promise((s,c)=>{i.read(e,t,n,r,o,(e,t,n)=>{if(e)return c(e);s({bytesRead:t,buffer:n})})})};t.write=function(e,t,...n){if(typeof n[n.length-1]==="function"){return i.write(e,t,...n)}return new Promise((r,o)=>{i.write(e,t,...n,(e,t,n)=>{if(e)return o(e);r({bytesWritten:t,buffer:n})})})}},896:function(e){e.exports=function(e,n){var r=[];for(var i=0;i<e.length;i++){var o=n(e[i],i);if(t(o))r.push.apply(r,o);else r.push(o)}return r};var t=Array.isArray||function(e){return Object.prototype.toString.call(e)==="[object Array]"}},900:function(e,t,n){"use strict";const r=n(676).fromCallback;const i=n(622);const o=n(598);const s=n(727);const c=n(322).pathExists;function createLink(e,t,n){function makeLink(e,t){o.link(e,t,e=>{if(e)return n(e);n(null)})}c(t,(r,a)=>{if(r)return n(r);if(a)return n(null);o.lstat(e,r=>{if(r){r.message=r.message.replace("lstat","ensureLink");return n(r)}const o=i.dirname(t);c(o,(r,i)=>{if(r)return n(r);if(i)return makeLink(e,t);s.mkdirs(o,r=>{if(r)return n(r);makeLink(e,t)})})})})}function createLinkSync(e,t){const n=o.existsSync(t);if(n)return undefined;try{o.lstatSync(e)}catch(e){e.message=e.message.replace("lstat","ensureLink");throw e}const r=i.dirname(t);const c=o.existsSync(r);if(c)return o.linkSync(e,t);s.mkdirsSync(r);return o.linkSync(e,t)}e.exports={createLink:r(createLink),createLinkSync:createLinkSync}},916:function(e,t,n){"use strict";const r=n(598);const i=n(87);const o=n(622);function hasMillisResSync(){let e=o.join("millis-test-sync"+Date.now().toString()+Math.random().toString().slice(2));e=o.join(i.tmpdir(),e);const t=new Date(1435410243862);r.writeFileSync(e,"https://github.com/jprichardson/node-fs-extra/pull/141");const n=r.openSync(e,"r+");r.futimesSync(n,t,t);r.closeSync(n);return r.statSync(e).mtime>1435410243e3}function hasMillisRes(e){let t=o.join("millis-test"+Date.now().toString()+Math.random().toString().slice(2));t=o.join(i.tmpdir(),t);const n=new Date(1435410243862);r.writeFile(t,"https://github.com/jprichardson/node-fs-extra/pull/141",i=>{if(i)return e(i);r.open(t,"r+",(i,o)=>{if(i)return e(i);r.futimes(o,n,n,n=>{if(n)return e(n);r.close(o,n=>{if(n)return e(n);r.stat(t,(t,n)=>{if(t)return e(t);e(null,n.mtime>1435410243e3)})})})})})}function timeRemoveMillis(e){if(typeof e==="number"){return Math.floor(e/1e3)*1e3}else if(e instanceof Date){return new Date(Math.floor(e.getTime()/1e3)*1e3)}else{throw new Error("fs-extra: timeRemoveMillis() unknown parameter type")}}function utimesMillis(e,t,n,i){r.open(e,"r+",(e,o)=>{if(e)return i(e);r.futimes(o,t,n,e=>{r.close(o,t=>{if(i)i(e||t)})})})}function utimesMillisSync(e,t,n){const i=r.openSync(e,"r+");r.futimesSync(i,t,n);return r.closeSync(i)}e.exports={hasMillisRes:hasMillisRes,hasMillisResSync:hasMillisResSync,timeRemoveMillis:timeRemoveMillis,utimesMillis:utimesMillis,utimesMillisSync:utimesMillisSync}},930:function(e,t,n){"use strict";const r=n(622);const i=n(598);const o=n(322).pathExists;function symlinkPaths(e,t,n){if(r.isAbsolute(e)){return i.lstat(e,t=>{if(t){t.message=t.message.replace("lstat","ensureSymlink");return n(t)}return n(null,{toCwd:e,toDst:e})})}else{const s=r.dirname(t);const c=r.join(s,e);return o(c,(t,o)=>{if(t)return n(t);if(o){return n(null,{toCwd:c,toDst:e})}else{return i.lstat(e,t=>{if(t){t.message=t.message.replace("lstat","ensureSymlink");return n(t)}return n(null,{toCwd:e,toDst:r.relative(s,e)})})}})}}function symlinkPathsSync(e,t){let n;if(r.isAbsolute(e)){n=i.existsSync(e);if(!n)throw new Error("absolute srcpath does not exist");return{toCwd:e,toDst:e}}else{const o=r.dirname(t);const s=r.join(o,e);n=i.existsSync(s);if(n){return{toCwd:s,toDst:e}}else{n=i.existsSync(e);if(!n)throw new Error("relative srcpath does not exist");return{toCwd:e,toDst:r.relative(o,e)}}}}e.exports={symlinkPaths:symlinkPaths,symlinkPathsSync:symlinkPathsSync}},932:function(e){"use strict";var t=setTimeout;function createSleepPromise(e,n){var r=n.useCachedSetTimeout,i=r?t:setTimeout;return new Promise(function(t){i(t,e)})}function sleep(e){function b(e){return r.then(function(){return e})}var t=1<arguments.length&&void 0!==arguments[1]?arguments[1]:{},n=t.useCachedSetTimeout,r=createSleepPromise(e,{useCachedSetTimeout:n});return b.then=function(){return r.then.apply(r,arguments)},b.catch=Promise.resolve().catch,b}e.exports=sleep},959:function(e,t,n){"use strict";e.exports={moveSync:n(95)}},975:function(e,t,n){"use strict";const r=n(598);function symlinkType(e,t,n){n=typeof t==="function"?t:n;t=typeof t==="function"?false:t;if(t)return n(null,t);r.lstat(e,(e,r)=>{if(e)return n(null,"file");t=r&&r.isDirectory()?"dir":"file";n(null,t)})}function symlinkTypeSync(e,t){let n;if(t)return t;try{n=r.lstatSync(e)}catch(e){return"file"}return n&&n.isDirectory()?"dir":"file"}e.exports={symlinkType:symlinkType,symlinkTypeSync:symlinkTypeSync}},977:function(e){var t=1e3;var n=t*60;var r=n*60;var i=r*24;var o=i*7;var s=i*365.25;e.exports=function(e,t){t=t||{};var n=typeof e;if(n==="string"&&e.length>0){return parse(e)}else if(n==="number"&&isFinite(e)){return t.long?fmtLong(e):fmtShort(e)}throw new Error("val is not a non-empty string or a valid number. val="+JSON.stringify(e))};function parse(e){e=String(e);if(e.length>100){return}var c=/^(-?(?:\d+)?\.?\d+) *(milliseconds?|msecs?|ms|seconds?|secs?|s|minutes?|mins?|m|hours?|hrs?|h|days?|d|weeks?|w|years?|yrs?|y)?$/i.exec(e);if(!c){return}var a=parseFloat(c[1]);var u=(c[2]||"ms").toLowerCase();switch(u){case"years":case"year":case"yrs":case"yr":case"y":return a*s;case"weeks":case"week":case"w":return a*o;case"days":case"day":case"d":return a*i;case"hours":case"hour":case"hrs":case"hr":case"h":return a*r;case"minutes":case"minute":case"mins":case"min":case"m":return a*n;case"seconds":case"second":case"secs":case"sec":case"s":return a*t;case"milliseconds":case"millisecond":case"msecs":case"msec":case"ms":return a;default:return undefined}}function fmtShort(e){var o=Math.abs(e);if(o>=i){return Math.round(e/i)+"d"}if(o>=r){return Math.round(e/r)+"h"}if(o>=n){return Math.round(e/n)+"m"}if(o>=t){return Math.round(e/t)+"s"}return e+"ms"}function fmtLong(e){var o=Math.abs(e);if(o>=i){return plural(e,o,i,"day")}if(o>=r){return plural(e,o,r,"hour")}if(o>=n){return plural(e,o,n,"minute")}if(o>=t){return plural(e,o,t,"second")}return e+" ms"}function plural(e,t,n,r){var i=t>=n*1.5;return Math.round(e/n)+" "+r+(i?"s":"")}},988:function(e){function RetryOperation(e,t){if(typeof t==="boolean"){t={forever:t}}this._originalTimeouts=JSON.parse(JSON.stringify(e));this._timeouts=e;this._options=t||{};this._maxRetryTime=t&&t.maxRetryTime||Infinity;this._fn=null;this._errors=[];this._attempts=1;this._operationTimeout=null;this._operationTimeoutCb=null;this._timeout=null;this._operationStart=null;if(this._options.forever){this._cachedTimeouts=this._timeouts.slice(0)}}e.exports=RetryOperation;RetryOperation.prototype.reset=function(){this._attempts=1;this._timeouts=this._originalTimeouts};RetryOperation.prototype.stop=function(){if(this._timeout){clearTimeout(this._timeout)}this._timeouts=[];this._cachedTimeouts=null};RetryOperation.prototype.retry=function(e){if(this._timeout){clearTimeout(this._timeout)}if(!e){return false}var t=(new Date).getTime();if(e&&t-this._operationStart>=this._maxRetryTime){this._errors.unshift(new Error("RetryOperation timeout occurred"));return false}this._errors.push(e);var n=this._timeouts.shift();if(n===undefined){if(this._cachedTimeouts){this._errors.splice(this._errors.length-1,this._errors.length);this._timeouts=this._cachedTimeouts.slice(0);n=this._timeouts.shift()}else{return false}}var r=this;var i=setTimeout(function(){r._attempts++;if(r._operationTimeoutCb){r._timeout=setTimeout(function(){r._operationTimeoutCb(r._attempts)},r._operationTimeout);if(r._options.unref){r._timeout.unref()}}r._fn(r._attempts)},n);if(this._options.unref){i.unref()}return true};RetryOperation.prototype.attempt=function(e,t){this._fn=e;if(t){if(t.timeout){this._operationTimeout=t.timeout}if(t.cb){this._operationTimeoutCb=t.cb}}var n=this;if(this._operationTimeoutCb){this._timeout=setTimeout(function(){n._operationTimeoutCb()},n._operationTimeout)}this._operationStart=(new Date).getTime();this._fn(this._attempts)};RetryOperation.prototype.try=function(e){console.log("Using RetryOperation.try() is deprecated");this.attempt(e)};RetryOperation.prototype.start=function(e){console.log("Using RetryOperation.start() is deprecated");this.attempt(e)};RetryOperation.prototype.start=RetryOperation.prototype.try;RetryOperation.prototype.errors=function(){return this._errors};RetryOperation.prototype.attempts=function(){return this._attempts};RetryOperation.prototype.mainError=function(){if(this._errors.length===0){return null}var e={};var t=null;var n=0;for(var r=0;r<this._errors.length;r++){var i=this._errors[r];var o=i.message;var s=(e[o]||0)+1;e[o]=s;if(s>=n){t=i;n=s}}return t}}},function(e){"use strict";!function(){e.r=function(e){if(typeof Symbol!=="undefined"&&Symbol.toStringTag){Object.defineProperty(e,Symbol.toStringTag,{value:"Module"})}Object.defineProperty(e,"__esModule",{value:true})}}();!function(){var t=Object.prototype.hasOwnProperty;e.d=function(e,n,r){if(!t.call(e,n)){Object.defineProperty(e,n,{enumerable:true,get:r})}}}();!function(){e.t=function(t,n){if(n&1)t=this(t);if(n&8)return t;if(n&4&&typeof t==="object"&&t&&t.__esModule)return t;var r=Object.create(null);e.r(r);Object.defineProperty(r,"default",{enumerable:true,value:t});if(n&2&&typeof t!="string")for(var i in t)e.d(r,i,function(e){return t[e]}.bind(null,i));return r}}();!function(){e.n=function(t){var n=t&&t.__esModule?function getDefault(){return t["default"]}:function getModuleExports(){return t};e.d(n,"a",n);return n}}()});